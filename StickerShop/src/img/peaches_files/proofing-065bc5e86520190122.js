webpackJsonp([30],{0:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}n(306);var a=n(4),i=o(a),u=n(16),l=n(7),s=n(76),c=n(1277),f=o(c),d=n(948),p=o(d),h=n(1340),m=o(h),v=n(133),y=n(1),_=o(y),b=n(2),g=o(b);n(669);var E=n(11),O=r(E),w=n(280);_.default.App=function(e){e.featureContext=e.featureContext||{};var t=_.default.Translation,n=_.default.DefaultTranslation;O.set(e.config),[n,t].forEach(v.addTranslation);var r=(0,m.default)((0,s.omit)(e,"featureContext")),o=(0,p.default)(f.default);(0,l.render)(i.default.createElement(w.Provider,{flags:e.featureContext},i.default.createElement(u.Provider,{store:r},i.default.createElement(o,{dispatch:r.dispatch}))),g.default.getElementById("proofing_app"))}},250:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(251),a=r(o),i=n(252),u=r(i);e.exports={TransitionGroup:u.default,CSSTransitionGroup:a.default}},251:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(4),s=r(l),c=n(21),f=r(c),d=n(252),p=r(d),h=n(256),m=r(h),v=n(263),y=({transitionName:v.nameShape.isRequired,transitionAppear:f.default.bool,transitionEnter:f.default.bool,transitionLeave:f.default.bool,transitionAppearTimeout:(0,v.transitionTimeout)("Appear"),transitionEnterTimeout:(0,v.transitionTimeout)("Enter"),transitionLeaveTimeout:(0,v.transitionTimeout)("Leave")},{transitionAppear:!1,transitionEnter:!0,transitionLeave:!0}),_=function(e){function t(){var n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=r=a(this,e.call.apply(e,[this].concat(l))),r._wrapChild=function(e){return s.default.createElement(m.default,{name:r.props.transitionName,appear:r.props.transitionAppear,enter:r.props.transitionEnter,leave:r.props.transitionLeave,appearTimeout:r.props.transitionAppearTimeout,enterTimeout:r.props.transitionEnterTimeout,leaveTimeout:r.props.transitionLeaveTimeout},e)},i=n,a(r,i)}return i(t,e),t.prototype.render=function(){return s.default.createElement(p.default,u({},this.props,{childFactory:this._wrapChild}))},t}(s.default.Component);_.displayName="CSSTransitionGroup",_.propTypes={},_.defaultProps=y,t.default=_,e.exports=t.default},252:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(253),s=r(l),c=n(4),f=r(c),d=n(21),p=r(d),h=n(254),m=(r(h),n(255)),v=({component:p.default.any,childFactory:p.default.func,children:p.default.node},{component:"span",childFactory:function(e){return e}}),y=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r));return i.performAppear=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(i._handleDoneAppearing.bind(i,e,t)):i._handleDoneAppearing(e,t)},i._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete i.currentlyTransitioningKeys[e];var n=(0,m.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performEnter=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(i._handleDoneEntering.bind(i,e,t)):i._handleDoneEntering(e,t)},i._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete i.currentlyTransitioningKeys[e];var n=(0,m.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)||i.performLeave(e,t)},i.performLeave=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(i._handleDoneLeaving.bind(i,e,t)):i._handleDoneLeaving(e,t)},i._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete i.currentlyTransitioningKeys[e];var n=(0,m.getChildMapping)(i.props.children);n&&n.hasOwnProperty(e)?i.keysToEnter.push(e):i.setState(function(t){var n=u({},t.children);return delete n[e],{children:n}})},i.childRefs=Object.create(null),i.state={children:(0,m.getChildMapping)(n.children)},i}return i(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,m.getChildMapping)(e.children),n=this.state.children;this.setState({children:(0,m.mergeChildMappings)(n,t)});for(var r in t){var o=n&&n.hasOwnProperty(r);!t[r]||o||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var a in n){var i=t&&t.hasOwnProperty(a);!n[a]||i||this.currentlyTransitioningKeys[a]||this.keysToLeave.push(a)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t,e.childRefs[t])});var n=this.keysToLeave;this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t,e.childRefs[t])})},t.prototype.render=function(){var e=this,t=[],n=function(n){var r=e.state.children[n];if(r){var o="string"!=typeof r.ref,a=e.props.childFactory(r),i=function(t){e.childRefs[n]=t};a===r&&o&&(i=(0,s.default)(r.ref,i)),t.push(f.default.cloneElement(a,{key:n,ref:i}))}};for(var r in this.state.children)n(r);var o=u({},this.props);return delete o.transitionLeave,delete o.transitionName,delete o.transitionAppear,delete o.transitionEnter,delete o.childFactory,delete o.transitionLeaveTimeout,delete o.transitionEnterTimeout,delete o.transitionAppearTimeout,delete o.component,f.default.createElement(this.props.component,o,t)},t}(f.default.Component);y.displayName="TransitionGroup",y.propTypes={},y.defaultProps=v,t.default=y,e.exports=t.default},253:function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter(function(e){return null!=e}),0!==t.length)return 1===t.length?t[0]:t.reduce(function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}})}},254:function(e,t,n){"use strict";var r=function(){};e.exports=r},255:function(e,t,n){"use strict";function r(e){if(!e)return e;var t={};return a.Children.map(e,function(e){return e}).forEach(function(e){t[e.key]=e}),t}function o(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},o=[];for(var a in e)t.hasOwnProperty(a)?o.length&&(r[a]=o,o=[]):o.push(a);var i=void 0,u={};for(var l in t){if(r.hasOwnProperty(l))for(i=0;i<r[l].length;i++){var s=r[l][i];u[r[l][i]]=n(s)}u[l]=n(l)}for(i=0;i<o.length;i++)u[o[i]]=n(o[i]);return u}t.__esModule=!0,t.getChildMapping=r,t.mergeChildMappings=o;var a=n(4)},256:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return O.length?O.forEach(function(n){return e.addEventListener(n,t,!1)}):setTimeout(t,0),function(){O.length&&O.forEach(function(n){return e.removeEventListener(n,t,!1)})}}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(257),c=r(s),f=n(259),d=r(f),p=n(260),h=r(p),m=n(262),v=n(4),y=r(v),_=n(21),b=r(_),g=n(7),E=n(263),O=[];m.transitionEnd&&O.push(m.transitionEnd),m.animationEnd&&O.push(m.animationEnd);var w=({children:b.default.node,name:E.nameShape.isRequired,appear:b.default.bool,enter:b.default.bool,leave:b.default.bool,appearTimeout:b.default.number,enterTimeout:b.default.number,leaveTimeout:b.default.number},function(e){function t(){var n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=a(this,e.call.apply(e,[this].concat(l))),r.componentWillAppear=function(e){r.props.appear?r.transition("appear",e,r.props.appearTimeout):e()},r.componentWillEnter=function(e){r.props.enter?r.transition("enter",e,r.props.enterTimeout):e()},r.componentWillLeave=function(e){r.props.leave?r.transition("leave",e,r.props.leaveTimeout):e()},i=n,a(r,i)}return i(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var r=(0,g.findDOMNode)(this);if(!r)return void(t&&t());var o=this.props.name[e]||this.props.name+"-"+e,a=this.props.name[e+"Active"]||o+"-active",i=null,l=void 0;(0,c.default)(r,o),this.queueClassAndNode(a,r);var s=function(e){e&&e.target!==r||(clearTimeout(i),l&&l(),(0,d.default)(r,o),(0,d.default)(r,a),l&&l(),t&&t())};n?(i=setTimeout(s,n),this.transitionTimeouts.push(i)):m.transitionEnd&&(l=u(r,s))},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,h.default)(function(){return n.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,c.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=l({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,y.default.cloneElement(y.default.Children.only(this.props.children),e)},t}(y.default.Component));w.displayName="CSSTransitionGroupChild",w.propTypes={},t.default=w,e.exports=t.default},257:function(e,t,n){"use strict";function r(e,t){e.classList?e.classList.add(t):(0,a.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}var o=n(17);t.__esModule=!0,t.default=r;var a=o(n(258));e.exports=t.default},258:function(e,t){"use strict";function n(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}t.__esModule=!0,t.default=n,e.exports=t.default},259:function(e,t){"use strict";function n(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=n(e.className,t):e.setAttribute("class",n(e.className&&e.className.baseVal||"",t))}},260:function(e,t,n){"use strict";function r(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-f)),r=setTimeout(e,n);return f=t,r}var o=n(17);t.__esModule=!0,t.default=void 0;var a,i=o(n(261)),u=["","webkit","moz","o","ms"],l="clearTimeout",s=r,c=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&u.some(function(e){var t=c(e,"request");if(t in window)return l=c(e,"cancel"),s=function(e){return window[t](e)}});var f=(new Date).getTime();a=function(e){return s(e)},a.cancel=function(e){window[l]&&"function"==typeof window[l]&&window[l](e)};var d=a;t.default=d,e.exports=t.default},261:function(e,t){"use strict";t.__esModule=!0,t.default=void 0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=n,e.exports=t.default},262:function(e,t,n){"use strict";function r(){for(var e,t,n=document.createElement("div").style,r={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},o=Object.keys(r),a="",i=0;i<o.length;i++){var u=o[i];if(u+"TransitionProperty"in n){a="-"+u.toLowerCase(),e=r[u]("TransitionEnd"),t=r[u]("AnimationEnd");break}}return!e&&"transitionProperty"in n&&(e="transitionend"),!t&&"animationName"in n&&(t="animationend"),n=null,{animationEnd:t,transitionEnd:e,prefix:a}}var o=n(17);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var a=o(n(261)),i="transform";t.transform=i;var u,l,s;t.animationEnd=s,t.transitionEnd=l;var c,f,d,p;t.transitionDelay=p,t.transitionTiming=d,t.transitionDuration=f,t.transitionProperty=c;var h,m,v,y;if(t.animationDelay=y,t.animationTiming=v,t.animationDuration=m,t.animationName=h,a.default){var _=r();u=_.prefix,t.transitionEnd=l=_.transitionEnd,t.animationEnd=s=_.animationEnd,t.transform=i=u+"-"+i,t.transitionProperty=c=u+"-transition-property",t.transitionDuration=f=u+"-transition-duration",t.transitionDelay=p=u+"-transition-delay",t.transitionTiming=d=u+"-transition-timing-function",t.animationName=h=u+"-animation-name",t.animationDuration=m=u+"-animation-duration",t.animationTiming=v=u+"-animation-delay",t.animationDelay=y=u+"-animation-timing-function"}var b={transform:i,end:l,property:c,timing:d,delay:p,duration:f};t.default=b},263:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=o;var a=n(4),i=(r(a),n(21)),u=r(i);t.nameShape=u.default.oneOfType([u.default.string,u.default.shape({enter:u.default.string,leave:u.default.string,active:u.default.string}),u.default.shape({enter:u.default.string,enterActive:u.default.string,leave:u.default.string,leaveActive:u.default.string,appear:u.default.string,appearActive:u.default.string})])},641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateArtwork=t.uploadFile=t.clearArtworks=t.UPDATE_ARTWORK=t.UPLOAD_PROGRESS=t.UPLOAD_SUCCEEDED=t.UPLOAD_FAILED=t.UPLOAD_FILE=t.CLEAR_ARTWORKS=t.ADD_ARTWORK=void 0;var r=n(642),o=n(645);t.ADD_ARTWORK=r.ADD_ARTWORK,t.CLEAR_ARTWORKS=o.CLEAR_ARTWORKS,t.UPLOAD_FILE=r.UPLOAD_FILE,t.UPLOAD_FAILED=r.UPLOAD_FAILED,t.UPLOAD_SUCCEEDED=r.UPLOAD_SUCCEEDED,t.UPLOAD_PROGRESS=r.UPLOAD_PROGRESS,t.UPDATE_ARTWORK=o.UPDATE_ARTWORK,t.clearArtworks=o.clearArtworks,t.uploadFile=r.uploadFile,t.updateArtwork=o.updateArtwork,t.default={uploadFile:r.uploadFile,updateArtwork:o.updateArtwork}},645:function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=t.CLEAR_ARTWORKS="CLEAR_ARTWORKS",o=t.UPDATE_ARTWORK="UPDATE_ARTWORK";t.types=[r,o],t.clearArtworks=function(){return{type:r}},t.updateArtwork=function(e,t,r){var a;return a={type:o},n(a,e,t),n(a,"artworkId",r),a}},657:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(7),f=r(c),d=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.forwardUploadEvent=n.forwardUploadEvent.bind(n),n.triggerFileInput=n.triggerFileInput.bind(n),n}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.artwork,r=e.t;return s.default.createElement("div",{className:"center-block"},s.default.createElement("div",{className:"field file",id:"choose_file_"+t},s.default.createElement("input",{ref:"_fileUploadInput",id:"file_input_"+t,name:"file",onChange:this.forwardUploadEvent,type:"file"}),s.default.createElement("div",{className:"fake"},s.default.createElement("button",{className:"button small blue choose-file",onClick:this.triggerFileInput,type:"button"},r("choose_file")),s.default.createElement("span",{className:"file-input-wrapper"},s.default.createElement("input",{ref:"chosenFileName",disabled:"disabled",onClick:this.triggerFileInput,type:"text",value:this.fileNameValue(n,r("no_file_chosen"))})))))}},{key:"forwardUploadEvent",value:function(e){var t=e.target;if(null!=t){var n=t.files;n.length>0&&this.props.triggerUpload(e)}}},{key:"fileNameValue",value:function(e,t){return e&&e.fileName?e.fileName:t}},{key:"triggerFileInput",value:function(){var e=f.default.findDOMNode(this.refs._fileUploadInput);null!=e&&(this.props.clearOnTrigger&&(e.value=""),e.click())}}]),t}(l.PureComponent);t.default=d},659:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.hasPickedColors=t.anyFailed=t.allSelected=t.allUploaded=t.toParams=t.STATE_COMPLETED=t.STATE_FAILED=t.STATE_UPLOADING=t.STATE_PENDING=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(76),i=n(67),u=n(660),l=r(u),s=t.STATE_PENDING="pending",c=(t.STATE_UPLOADING="uploading",t.STATE_FAILED="failed"),f=t.STATE_COMPLETED="completed";t.toParams=function(e){var t={artwork_instructions:e.artworkInstructions};return e.state===f&&(t=o({},t,{artwork_file_name:e.normalizedFileName,artwork_path:e.artworkPath})),l.ATTRIBUTES.forEach(function(n){e[n]&&(t=(0,i.assocPath)(["production_metadata",n],e[n],o({production_metadata:{}},t)))}),(0,a.filter)(a.present,t)},t.allUploaded=function(e){return!(!e||0===e.length)&&(0,a.all)(function(e){return e.state===f},e)},t.allSelected=function(e){return!(!e||0===e.length)&&!e.some(function(e){return e.state===s})},t.anyFailed=function(e){return!(!e||0===e.length)&&e.some(function(e){return e.state===c})},t.hasPickedColors=function(e,t){return(0,a.all)(function(e){return void 0===e.colors},e)||(0,a.all)(function(e){return void 0!==e.color},t)}},660:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ATTRIBUTES=["color","units_per_roll"]},666:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(76),i=n(67),u=n(659),l=n(641),s=function(e,t){var n=t.artwork,r=e.uploadedFiles;return o({},e,{uploadedFiles:r.concat([n])})},c=function(e,t){return o({},e,{uploadedFiles:[]})},f=function(e,t){var n=e.uploadedFiles,r=n.find(function(e){return e.id===t.artworkId});if(null==r)return e;var a=o({artworkInstructions:""},r,{fileName:t.file.name,normalizedFileName:t.normalizedFileName,state:u.STATE_UPLOADING,artworkPath:t.artworkPath});return o({},e,{uploadedFiles:(0,i.replaceIn)(n,r,a)})},d=function(e,t){var n=e.uploadedFiles,r=n.find(function(e){return e.id===t.artworkId});if(null==r)return e;var a=o({},r,{state:u.STATE_FAILED});return o({},e,{uploadedFiles:(0,i.replaceIn)(n,r,a)})},p=function(e,t){var n=e.uploadedFiles,r=n.find(function(e){return e.id===t.artworkId});if(null==r)return e;var a=o({},r,{state:u.STATE_COMPLETED,percentage:100});return o({},e,{uploadedFiles:(0,i.replaceIn)(n,r,a)})},h=function(e,t){var n=e.uploadedFiles,r=n.find(function(e){return e.id===t.artworkId});if(null==r)return e;var a=o({},r,{percentage:t.percentage});return o({},e,{uploadedFiles:(0,i.replaceIn)(n,r,a)})},m=function(e,t){var n=e.uploadedFiles,r=n.find(function(e){return e.id===t.artworkId});if(null==r)return e;var u=o({},r,(0,a.omit)(t,"type","artworkId")),l=u.artworkInstructions;return o({},e,{uploadedFiles:(0,i.replaceIn)(n,r,u),artworkInstructions:l})},v=void 0,y=function(e,t){var n;return(v=v||(0,i.combineReducersByAction)((n={},r(n,l.ADD_ARTWORK,s),r(n,l.CLEAR_ARTWORKS,c),r(n,l.UPLOAD_FILE,f),r(n,l.UPLOAD_FAILED,d),r(n,l.UPLOAD_SUCCEEDED,p),r(n,l.UPLOAD_PROGRESS,h),r(n,l.UPDATE_ARTWORK,m),n)))(e,t)};t.default=y},950:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.stateInit=t.defaultShippingMethod=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(124),i=r(a),u=n(121),l=n(126),s=r(l),c=n(904),f=t.defaultShippingMethod=function(e,t,n){var r=i.fetch(e,t,n);return r[0]&&r[0].id},d=function(e,t){return(0,u.definePaymentMethod)(e,t)},p=function(e,t){return s.forAddress(t)};t.stateInit=function(e){var t=!1,n=f(e.order.facility,e.defaultShipAddress,e.order.totalForShipping),r=p(e.order,e.order.shipAddress),a=e.payment.defaultCreditCards[r],i=(a||{}).id,u=o({},e.order,{shippingMethodId:n,credit_card_id:i,currentBusinessEntity:r}),l=d(u,a);return u=o({},u,{paymentMethod:l,useShipping:u.isShippable&&(!u.billing_address.id||u.shipAddress.id===u.billing_address.id),credit_card:null}),u=(0,c.setBillingAddress)(u,e.billingAddresses),o({},e,{requestInProgress:t,order:u})}},952:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.addressDisplayOption=t.showAddressPicker=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(244);t.showAddressPicker=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shipping:!1,billing:!1},t=arguments[1];return t.type===a.TOGGLE_ADDRESS_PICKER?o({},e,r({},t.addressType,!e[t.addressType])):e},t.addressDisplayOption=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shipping:"DEFAULT",billing:"DEFAULT"},t=arguments[1];return t.type===a.SET_ADDRESS_DISPLAY_OPTION?o({},e,r({},t.addressType,t.option)):e}},966:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(105),i=r(a);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"NOOP"},n=e,r=function(e,t){return e};switch(t.type){case i.default.vatId.VALID_VIES:return o({},n,{viesVatNumber:!0,viesState:"vies_valid"});case i.default.vatId.INVALID_VIES:return o({},n,{viesVatNumber:!1,viesState:"vies_invalid"});case i.default.vatId.VIES_ERROR:return o({},n,{viesVatNumber:!1,viesState:"vies_error"});case i.default.vatId.VIES_NOT_APPLICABLE:return o({},n,{viesVatNumber:!1,viesState:"vies_not_applicable"})}return r(n,t)}},967:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setBusinessEntity=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(902),u=o(i),l=n(121),s=r(l),c=n(124),f=r(c),d=n(904),p=n(75),h=n(950),m=n(76),v=n(78),y=n(126),_=r(y),b=function(e,t){return g((0,v.assign)(e,t.attrs))},g=function(e){var t=e.credit_card_id&&{type:"id",id:e.credit_card_id};return(0,v.set)("paymentMethod",s.definePaymentMethod(e,t),e)},E=function(e,t){var n=(0,v.set)("shippingMethodId",t.attrs.shippingMethodId,e),r=s.definePaymentMethod(n,t.attrs.defaultCreditCard);return(0,v.set)("paymentMethod",r,n)},O=function(e,t){var n=f.fetch(e.facility,t,e.totalForShipping);if(!n.find(function(t){return t.id===+e.shippingMethodId}))return!0},w=t.setBusinessEntity=function(e,t){var n=_.forAddress(t.address);if(n!==e.currentBusinessEntity){var r=t.payment,o=r.defaultCreditCards[n];return(0,v.assign)(e,{currentBusinessEntity:n,credit_card_id:o&&o.id,paymentMethod:s.paymentMethodForNewEntity(e,o)})}return e},P=function(e,t){if(O(e,t)){e=(0,v.set)("shippingMethodId",(0,h.defaultShippingMethod)(e.facility,t,e.totalForShipping),e);var n=e.credit_card_id&&{type:"id",id:e.credit_card_id},r=a({},e.giftCardPayment,{isApplied:e.giftCardPayment.isApplied&&(0,m.present)(e.shippingMethodId)});return a({},e,{paymentMethod:s.definePaymentMethod(e,n),giftCardPayment:r})}return e},A=function(e,t){var n=(0,p.normalizedMerge)(e.shipAddress,t.attrs||t);return P(e,n)},k=function(e,t){var n=t.attrs,r=n.addressType,o=n.address,i=n.addressId;if("shipping"===r){var u=a({},e,{shipAddressId:i,shipAddress:o});return e.useShipping&&(u=(0,d.setBillingAddress)(u,t.billingAddresses)),P(u,o)}return a({},e,{billing_address_id:i,billing_address:o})},T=function(e,t){var n=t.adjustment,r=a({},e,{adjustment:n}),o=null!=e.credit_card_id?{type:"id",id:e.credit_card_id}:null,i=s.definePaymentMethod(r,o);return(0,v.set)("paymentMethod",i,r)},C=function(e,t){var n=M(e,t);return n=j(n,t)},j=function(e,t){var n=t.cart.cartItems;return(0,v.set)("isShippable",n.some(function(e){return e.product.shippable}),e)},M=function(e,t){var n=t.cart.adjustments;if(0===n.length)return e;var r=n[0];return T(e,{adjustment:r})};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"NOOP"},n=e,r=function(e,t){return e};switch(t.type){case u.default.order.UPDATE_ORDER:r=b;break;case u.default.order.SET_SHIPPING_METHOD:r=E;break;case u.default.order.SET_ADDRESS:r=k;break;case u.default.order.SET_MANUAL_ADJUSTMENT:r=T;break;case u.default.address.UPDATE_BUSINESS_ENTITY:r=w;break;case u.default.address.UPDATE_ADDRESS:case u.default.zipLookup.HANDLE_ZIP_LOOKUP_SUCCESS:r=A;break;case"SET_CART":r=C}return r(n,t)}},1059:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(4),i=r(a),u=n(1060),l=n(1061),s=r(l),c=n(266),f=r(c),d=function(e){var t=e.isSubscribed,n=e.onChange,r=e.orderToken,l=e.phone,c=e.t,f=e.userId,d=(0,a.useState)(!1),h=o(d,2),m=h[0],v=h[1],y=(0,a.useState)(!t),_=o(y,2),b=_[0],g=_[1],E=(0,a.useState)(l),O=o(E,2),w=O[0],P=O[1],A=(0,a.useState)(null),k=o(A,2),T=k[0],C=k[1],j=function(){w===l&&t?g(!1):(v(!0),C(null),(0,u.upsert)(w,f,r).then(function(e){v(!1),g(!1),null!=n&&n(e)}).catch(function(){v(!1),C(c.validations("phone_number"))}))},M=function(){v(!0),(0,u.remove)(f,r).then(function(e){v(!1),g(!0),null!=n&&n(e)})};return i.default.createElement("div",{className:"sms-form-container"},b?i.default.createElement(s.default,{error:T,isSubmitting:m,isSubscribed:t,onChange:P,onRemove:M,onSubmit:j,t:c,value:w}):i.default.createElement(p,{onEdit:function(){return g(!0)},phone:l,t:c}),i.default.createElement("div",{className:"clear"}))},p=function(e){var t=e.phone,n=e.onEdit,r=e.t;return i.default.createElement("div",{className:"sms-form",id:"sms"},i.default.createElement("span",null,t),i.default.createElement(f.default,{onClick:n},r("edit")))};t.default=d},1061:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),i=r(a),u=n(239),l=r(u),s=n(975),c=r(s),f=n(266),d=r(f),p=function(e){var t=e.error,n=e.isSubmitting,r=e.isSubscribed,o=e.onChange,u=e.onRemove,s=e.onSubmit,f=e.t,d=e.value;return i.default.createElement(l.default,{className:"sms-form",onValidSubmit:s},i.default.createElement(c.default,{error:t,onChange:o,validations:["required"],value:d}),i.default.createElement(h,{isSubmitting:n,onClick:s},f(r?"save":"submit")),r&&i.default.createElement(a.Fragment,null,i.default.createElement("span",null,f("or")," "),i.default.createElement(m,{onClick:u},f("Remove"))))},h=function(e){var t=e.isSubmitting,n=e.children;return i.default.createElement("button",{className:"small blue"+(t?" loading":""),type:"submit"},n)},m=function(e){var t=e.children,n=o(e,["children"]);return i.default.createElement(d.default,n,t)};t.default=p},1090:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stateInit=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(121),i=n(1091),u=r(i);t.stateInit=function(e){var t=e.order,n=e.payment.defaultCreditCards[t.currentBusinessEntity],r=n&&n.id,i=(0,
a.definePaymentMethod)(t,n),l=(0,u.default)(t.billing_address.vat_number);return o({},e,{order:o({},t,{billing_address:o({},t.billing_address,{vat_number:l}),credit_card_id:r,paymentMethod:i,credit_card:null})})}},1091:function(e,t){"use strict";e.exports=function(e){var t=/([A-Z]{2})?(.+)/g,n=t.exec(e);return e&&n?n[2]:null}},1277:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),f=n(16),d=n(86),p=n(1278),h=r(p),m=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props.translations,t=(0,d.buildExtendedTranslateFunction)("proofing",e,{cart:(0,d.buildTranslateFunction)("cart",e),checkout:(0,d.buildTranslateFunction)("checkout",e),productQuantity:(0,d.buildTranslateFunction)("product_quantity",e),validations:(0,d.buildTranslateFunction)("validations",e)});return c.default.createElement(h.default,u({},this.props,{t:t}))}}]),t}(s.Component),v=function(e){return u({},e)};t.default=(0,f.connect)(v)(m)},1278:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),f=n(669),d=r(f),p=n(1279),h=r(p),m=n(1339),v=r(m),y=n(1282),_=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handlePaymentRequest=n.handlePaymentRequest.bind(n),n.state={processingPayment:!1},n}return i(t,e),l(t,[{key:"componentDidUpdate",value:function(){this.state.processingPayment&&(d.default.addClass(d.default.find("body"),"page-processing-payment"),setTimeout(function(){d.default.addClass(d.default.find("#payment-overlay"),"expand")},10))}},{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("div",{id:"payment-overlay"}),this.state.processingPayment?c.default.createElement(v.default,this.props):c.default.createElement(h.default,u({},this.props,{handlePaymentRequest:this.handlePaymentRequest})))}},{key:"handlePaymentRequest",value:function(){this.setState({processingPayment:!0}),this.props.dispatch((0,y.completeOrder)(this.props.stripe))}}]),t}(s.PureComponent);t.default=_},1279:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(4),f=o(c),d=n(250),p=n(1280),h=o(p),m=n(1290),v=o(m),y=n(1303),_=o(y),b=n(1311),g=o(b),E=n(1327),O=o(E),w=n(1328),P=o(w),A=n(1329),k=o(A),T=n(1330),C=o(T),j=n(1331),M=o(j),N=n(1332),S=o(N),I=n(1333),R=o(I),D=n(1334),L=o(D),x=n(1335),U=o(x),F=n(1336),q=o(F),W=n(137),H=n(1286),Q=n(1289),V=r(Q),B=n(121),z=r(B),Y=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.artwork,n=e.activeRevisionId,r=e.handlePaymentRequest,o=e.order,a=e.dispatch,i=e.config,u=e.t,s=(0,H.findById)(t.revisions,n)||(0,H.latestRevision)(t.revisions),c=t.events;return f.default.createElement(d.CSSTransitionGroup,{transitionEnterTimeout:0,transitionLeaveTimeout:0,transitionName:"fade"},f.default.createElement("div",{className:"artwork-container",id:"artwork_"+t.id},f.default.createElement("div",{id:"main"},f.default.createElement(W.USAProvider,null,f.default.createElement(q.default,{activeArtwork:t,showProofNotification:this.props.showProofNotification,t:u})),this.renderToggleBackground(i,s,u),this.renderFlash(),f.default.createElement("div",{id:"proof-header"},this.proofHeader(t,s,o,a,i,u)),s?f.default.createElement(v.default,l({},this.props,{handlePaymentRequest:r,revision:s})):"",this.renderOrientation(s,this.props),f.default.createElement(_.default,l({},this.props,{revision:s})),f.default.createElement(g.default,l({},this.props,{events:c,revision:s})))))}},{key:"renderFlash",value:function(){var e=this.props,t=e.order,n=e.config,r=e.t;if(t.state===z.STATE.readyForProduction&&t.paymentState===z.PAYMENT_STATE.balanceDue)return f.default.createElement("p",{className:"notification-inline notice center-text",dangerouslySetInnerHTML:{__html:r("on_hold_payment",{link:"<a href="+n.addPaymentUrl+">"+t.orderNumber+"</a>"})}})}},{key:"renderOrientation",value:function(e,t){var n=t.artwork,r=t.config,o=t.dispatch,a=t.t,i=e&&e.product.configurationOptions.orientation;if(i)return f.default.createElement(h.default,{artwork:n,dispatch:o,images:r.images,orientationOptions:i.orientations,t:a})}},{key:"renderToggleBackground",value:function(e,t,n){if(null!=t){var r=t.product.id,o=e.supportsClearBackground.some(function(e){return e===r});return f.default.createElement(U.default,{isClear:o,t:n})}}},{key:"proofHeader",value:function(e,t,n,r,o,a){if(V.onHold(e))return f.default.createElement(k.default,{config:o,t:a});if(t&&t!==(0,H.latestRevision)(e.revisions))return f.default.createElement(S.default,{config:o,revision:t,t:a});var i=e.proof_state;switch(i){case V.STATE.ready_to_proof:return f.default.createElement(O.default,{artwork:e,config:o,dispatch:r,order:n,t:a});case V.STATE.awaiting_approval:return f.default.createElement(P.default,{artwork:e,revision:t,t:a});case V.STATE.canceled:return f.default.createElement(C.default,{t:a});case V.STATE.recently_approved:return f.default.createElement(L.default,{config:o,revision:t,t:a});case V.STATE.approved:return f.default.createElement(R.default,{config:o,revision:t,t:a});default:return f.default.createElement(M.default,{config:o,t:a})}}}]),t}(c.PureComponent);t.default=Y},1280:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(1281),f=r(c),d=n(1289),p=n(266),h=r(p),m=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleModal=n.toggleModal.bind(n),n.state={changingOrientation:!1},n}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.artwork,n=e.dispatch,r=e.images,o=e.orientationOptions,a=e.t,i=(0,d.isAwaitingApproval)(t),u=this.selectedOrientation(this.props);return s.default.createElement("div",{id:"proof-orientation"},this.renderIcon(r,u.orientation),this.renderDescription(u.orientation,u.index,a),i&&s.default.createElement(l.Fragment,null,s.default.createElement(h.default,{onClick:this.toggleModal},a("edit")),s.default.createElement(f.default,{dispatch:n,images:r,orientationOptions:o,productionMetadata:t.lineItem.productionMetadata,t:a,toggleModal:this.toggleModal,visible:this.state.changingOrientation})))}},{key:"renderDescription",value:function(e,t,n){return s.default.createElement("span",null,s.default.createElement("strong",null,n("Label_orientation"),":")," ",e?"#"+(t+1)+" "+n("label_orientations."+e.name):"N/A")}},{key:"renderIcon",value:function(e,t){if(t)return s.default.createElement("img",{alt:"",src:e.labelOrientations[t.name].icon})}},{key:"selectedOrientation",value:function(e){var t=e.artwork,n=e.orientationOptions,r=t.lineItem.productionMetadata,o=function(e){var t=e.rotation;return t===r.rotation};return{index:n.findIndex(o),orientation:n.find(o)}}},{key:"toggleModal",value:function(){this.setState({changingOrientation:!this.state.changingOrientation})}}]),t}(l.PureComponent);t.default=m},1281:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),f=n(219),d=r(f),p=n(1282),h=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=n.handleChange.bind(n),n.handleClose=n.handleClose.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.renderOption=n.renderOption.bind(n),n.state=u({},n.initialOrientation(),{submitting:!1}),n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.orientationOptions,n=e.t,r=e.visible,o=this.state.submitting;return c.default.createElement(d.default,{className:"center-text",id:"orientation-modal",onClose:this.handleClose,visible:r},c.default.createElement("h2",null,n("Change_orientation")),c.default.createElement("p",null,n("change_orientation_text")),c.default.createElement("div",{className:"block-grid-2 block-grid-sm-4"},t.map(this.renderOption)),c.default.createElement("button",{className:"button large primary "+(o?"loading":""),disabled:o,onClick:this.handleSubmit},n("Confirm")))}},{key:"renderOption",value:function(e,t){var n=e.name,r=e.rotation,o=this.props,a=o.images,i=o.t,u=a.labelOrientations[n],l=u.src,s=u.srcset,f="orientation-"+r;return c.default.createElement("div",{key:f,className:"orientation"},c.default.createElement("input",{checked:r===this.state.rotation,id:f,name:"orientation",onChange:this.handleChange,type:"radio",value:r}),c.default.createElement("label",{className:"br-4",htmlFor:f},c.default.createElement("img",{alt:"",src:l,srcSet:s}),"#",t+1," ",i("label_orientations."+n)))}},{key:"handleClose",value:function(){this.setState(this.initialOrientation()),this.props.toggleModal()}},{key:"handleChange",value:function(e){var t=e.target;null==t||this.state.submitting||this.setState({rotation:parseInt(t.value,10)})}},{key:"handleSubmit",value:function(){var e=this,t=this.props,n=t.dispatch,r=t.toggleModal;this.setState({submitting:!0}),n((0,p.updateOrientation)(this.state.rotation)).then(function(t){return e.setState({rotation:t.data.rotation,submitting:!1})}).then(r)}},{key:"initialOrientation",value:function(){return{rotation:this.props.productionMetadata.rotation}}}]),t}(s.PureComponent);t.default=h},1282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAnnotation=t.removeAnnotation=t.addAnnotation=t.fetchPendingLineItems=t.fetchOrderDetails=t.chargeOrder=t.completeOrder=t.updateArtwork=t.uploadFile=t.updateQuantity=t.updateOrientation=t.cancelItem=t.requestChanges=t.recentApproval=t.approveMockup=t.REMOVE_ANNOTATION=t.UPDATE_ANNOTATION=t.ADD_ANNOTATION=t.SHOW_NEXT_PROOF_NOTIFICATION=t.UPDATE_ORDER_DETAILS=t.UPLOAD_PROGRESS=t.UPLOAD_SUCCEEDED=t.UPLOAD_FAILED=t.UPLOAD_FILE=t.UPDATE_QUANTITY=t.UPDATE_ORIENTATION=t.CANCEL_ITEM=t.RECENTLY_APPROVED=t.REQUEST_CHANGES=t.APPROVE_MOCKUP=t.updatePhoneAlert=t.UPDATE_PHONE_ALERT=void 0;var r=n(1283),o=n(1287),a=n(1284),i=n(1288),u=n(641),l=t.UPDATE_PHONE_ALERT="UPDATE_PHONE_ALERT";t.updatePhoneAlert=function(e){return{type:l,address:e}};t.APPROVE_MOCKUP=r.APPROVE_MOCKUP,t.REQUEST_CHANGES=r.REQUEST_CHANGES,t.RECENTLY_APPROVED=r.RECENTLY_APPROVED,t.CANCEL_ITEM=i.CANCEL_ITEM,t.UPDATE_ORIENTATION=i.UPDATE_ORIENTATION,t.UPDATE_QUANTITY=i.UPDATE_QUANTITY,t.UPLOAD_FILE=u.UPLOAD_FILE,t.UPLOAD_FAILED=u.UPLOAD_FAILED,t.UPLOAD_SUCCEEDED=u.UPLOAD_SUCCEEDED,t.UPLOAD_PROGRESS=u.UPLOAD_PROGRESS,t.UPDATE_ORDER_DETAILS=o.UPDATE_ORDER_DETAILS,t.SHOW_NEXT_PROOF_NOTIFICATION=a.SHOW_NEXT_PROOF_NOTIFICATION,t.ADD_ANNOTATION=r.ADD_ANNOTATION,t.UPDATE_ANNOTATION=r.UPDATE_ANNOTATION,t.REMOVE_ANNOTATION=r.REMOVE_ANNOTATION,t.approveMockup=r.approveMockup,t.recentApproval=r.recentApproval,t.requestChanges=r.requestChanges,t.cancelItem=i.cancelItem,t.updateOrientation=i.updateOrientation,t.updateQuantity=i.updateQuantity,t.uploadFile=u.uploadFile,t.updateArtwork=u.updateArtwork,t.completeOrder=o.completeOrder,t.chargeOrder=o.chargeOrder,t.fetchOrderDetails=o.fetchOrderDetails,t.fetchPendingLineItems=o.fetchPendingLineItems,t.addAnnotation=r.addAnnotation,t.removeAnnotation=r.removeAnnotation,t.updateAnnotation=r.updateAnnotation,t.default={approveMockup:r.approveMockup,requestChanges:r.requestChanges,recentApproval:r.recentApproval,cancelItem:i.cancelItem,updateQuantity:i.updateQuantity,uploadFile:u.uploadFile,updateArtwork:u.updateArtwork,completeOrder:o.completeOrder,chargeOrder:o.chargeOrder,fetchOrderDetails:o.fetchOrderDetails,fetchPendingLineItems:o.fetchPendingLineItems,showNextProofNotification:a.showNextProofNotification,addAnnotation:r.addAnnotation,removeAnnotation:r.removeAnnotation,updateAnnotation:r.updateAnnotation}},1283:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.requestChanges=t.updateAnnotation=t.removeAnnotation=t.addAnnotation=t.approveMockup=t.recentApproval=t.types=t.UPDATE_ANNOTATION=t.REMOVE_ANNOTATION=t.ADD_ANNOTATION=t.REQUEST_CHANGES=t.RECENTLY_APPROVED=t.APPROVE_MOCKUP=void 0;var a=n(113),i=o(a),u=n(659),l=r(u),s=n(105),c=o(s),f=n(1284),d=n(1286),p=r(d),h=t.APPROVE_MOCKUP="APPROVE_MOCKUP",m=t.RECENTLY_APPROVED="RECENTLY_APPROVED",v=t.REQUEST_CHANGES="REQUEST_CHANGES",y=t.ADD_ANNOTATION="ADD_ANNOTATION",_=t.REMOVE_ANNOTATION="REMOVE_ANNOTATION",b=t.UPDATE_ANNOTATION="UPDATE_ANNOTATION",g=(t.types=[h,v,m,y,_,b],t.recentApproval=function(){return function(e,t){return i.default.put(t().config.approve_url).set("Accept","application/json").then(function(t){return E(e)}).catch(function(){return location.reload()})}},t.approveMockup=function e(t,n){return function(r,o){return i.default.put(o().config.approve_url).set("Accept","application/json").send({paymentIntentId:n}).then(function(n){if(202===n.statusCode){if(!t)throw new Error("stripe object needed for SCA");return c.default.strongAuth.handleStrongAuth({dispatch:r,getState:o,stripe:t,clientSecret:n.body.client_secret,selfCallback:e})}return g(r)})}},t.addAnnotation=function(e,t){e({type:y,annotation:t})},t.removeAnnotation=function(e,t){e({type:_,annotationId:t})},t.updateAnnotation=function(e,t){e({type:b,annotation:t})},t.requestChanges=function(){return function(e,t){var n=t().artwork,r=n.uploadedFiles[0],o=l.toParams(r),a=p.latestRevision(n.revisions);return a&&a.annotations&&(o.annotations=a.annotations),i.default.put(t().config.reject_url).set("Accept","application/json").send(o).then(function(t){return O(e)}).catch(function(){return location.reload()})}},function(e){e({type:h}),e((0,f.showNextProofNotification)())}),E=function(e){e({type:m}),e((0,f.showNextProofNotification)())},O=function(e){e({type:v}),e((0,f.showNextProofNotification)())}},1284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showNextProofNotification=t.SHOW_NEXT_PROOF_NOTIFICATION=void 0;var r=n(1285),o=t.SHOW_NEXT_PROOF_NOTIFICATION="SHOW_NEXT_PROOF_NOTIFICATION";t.showNextProofNotification=function(){return function(e,t){(0,r.refreshProofs)(),e({type:o})}}},1285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshProofs=void 0;var r=n(137);t.refreshProofs=function(){return r.actions.loadProofReadyArtworks({cached:!1})}},1286:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.STATE={awaiting_approval:"awaiting_approval",approved:"approved",recently_approved:"recently_approved",rejected:"rejected",canceled:"canceled"},r=function(e,t){return Object.keys(e).filter(function(n){return t(e[n])}).map(function(t){return e[t]})},o=function(e){var t=Object.values(e);return t[t.length-1]},a=(t.latestRevision=function(e){if(!e||0===Object.keys(e).length)return null;var t=r(e,function(e){return e.latest===!0});return t.length>0?t[t.length-1]:o(e)},t.findById=function(e,t){return r(e,function(e){return e.id===t})[0]},t.isAwaitingApproval=function(e){return e.proof_state===n.awaiting_approval},t.isApproved=function(e){return!!e&&e.proof_state===n.approved},t.inFinalState=function(e){return e.proof_state!==n.awaiting_approval},t.isRedraw=function(e){return!!e&&"redraw"===e.product.id});t.hasMeaningfulDimensions=function(e){return!a(e)}},1287:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.chargeOrder=t.completeOrder=t.fetchPendingLineItems=t.fetchOrderDetails=t.types=t.UPDATE_ORDER_DETAILS=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(113),u=o(i),l=n(1283),s=n(121),c=r(s),f=n(109),d=n(105),p=o(d),h=t.UPDATE_ORDER_DETAILS="UPDATE_ORDER_DETAILS",m=(t.types=[h],t.fetchOrderDetails=function(){return function(e,t){var n=t();return u.default.get(n.config.orderDetailsUrl).set("Accept","application/json").query({id:n.artwork.id,order_id:n.order.id,token:n.artwork.token}).then(function(t){return e(m(t.body))})}},function(e){return{type:h,order:e}}),v=(t.fetchPendingLineItems=function(){return function(e,t){var n=t();return u.default.get(n.config.lineItemsWithoutArtworkUrl).set("Accept","application/json").query({id:n.artwork.id,order_id:n.order.id,token:n.artwork.token}).then(function(t){return e(m(t.body))})}},t.completeOrder=function(e){return function(t,n){t((0,l.approveMockup)(e)).then(function(){t(p.default.order.orderCompleted()),window.location.href=n().config.order_in_production_url}).catch(function(e){var n=e.response?e.response.body:e;n&&"order_closed"===n.__error?window.location.reload():t(p.default.payment.captureFailed(n))})}},t.chargeOrder=function(e){return function(t,n){var r=n(),o={id:r.artwork.id,order:c.toParams(r.order),token:r.artwork.token};return r.order.paymentMethod===f.paymentMethods.PAYPAL?u.default.post(r.config.charge_paypal_url).set("Accept","application/json").send(o).then(function(e){return window.location=e.body.location}).catch(function(e){return t(p.default.payment.captureFailed(e.response.body))}):void t(v(e,null,o))}},function e(t,n,r){return function(o,i){var l=i();return n&&(r=a({},r,{paymentIntentId:n})),u.default.post(l.config.charge_url).set("Accept","application/json").send(r).then(function(n){if(202===n.statusCode){if(!t)throw new Error("Needs more authentication but no stripe object provided");return p.default.strongAuth.handleStrongAuth({dispatch:o,getState:i,stripe:t,clientSecret:n.body.client_secret,selfCallback:e,extraParams:r})}o(p.default.order.orderCompleted()),window.location.href=l.config.order_in_production_url}).catch(function(e){return o(p.default.payment.captureFailed(e.body?e.body.notice:e.response.body))})}})},1288:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateQuantity=t.updateOrientation=t.cancelItem=t.types=t.UPDATE_QUANTITY=t.UPDATE_ORIENTATION=t.CANCEL_ITEM=void 0;var o=n(113),a=r(o),i=n(1285),u=n(1282),l=t.CANCEL_ITEM="CANCEL_ITEM",s=t.UPDATE_ORIENTATION="UPDATE_ORIENTATION",c=t.UPDATE_QUANTITY="UPDATE_QUANTITY",f=(t.types=[l,s,c],t.cancelItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return function(t,n){return a.default.put(n().config.cancel_url).set("Accept","application/json").then(function(r){f(t,n().artwork.lineItem.id),e()}).catch(function(e){return e})}},t.updateOrientation=function(e){return function(t,n){return a.default.put(n().config.update_orientation_url).set("Accept","application/json").send({rotation:e}).then(function(e){return t({type:s,data:e.body})}).catch(function(e){return e})}},t.updateQuantity=function(e){return function(t,n){return a.default.put(n().config.update_line_item_url).set("Accept","application/json").send({quantity:e}).then(function(e){return d(t,e)}).catch(function(e){return e})}},function(e,t){e({type:l,lineItemId:t}),(0,i.refreshProofs)()}),d=function(e,t){return e({type:c,data:t.body}),e((0,u.fetchOrderDetails)())}},1289:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.isLastUnapprovedArtwork=t.isLatestRevision=t.readyForCustomerAction=t.isAwaitingApproval=t.inFinalState=t.onHold=t.isComplete=t.isReadyToProof=t.isCanceled=t.canShowRevision=t.STATE=void 0;var o=n(76),a=n(1286),i=r(a),u=n(145),l=t.STATE={ready_to_proof:"ready_to_proof",awaiting_approval:"awaiting_approval",canceled:"canceled",approved:"approved",recently_approved:"recently_approved"},s=(t.canShowRevision=function(e){return!s(e)&&!c(e)},t.isCanceled=function(e){return e.proof_state===l.canceled}),c=t.isReadyToProof=function(e){return e.proof_state===l.ready_to_proof},f=(t.isComplete=function(e){return e.proof_state===l.approved||e.proof_state===l.recently_approved},t.onHold=function(e){return e.on_hold},t.inFinalState=function(e){return[l.approved,l.canceled].includes(e.proof_state)},t.isAwaitingApproval=function(e){return e.proof_state===l.awaiting_approval},t.readyForCustomerAction=function(e,t){return e.proof_state===l.awaiting_approval||f(e,t)},function(e,t){return e.proof_state===l.recently_approved||t.proof_state===i.STATE.approved&&d(e,t)}),d=t.isLatestRevision=function(e,t){return t===i.latestRevision(e.revisions)},p=(t.isLastUnapprovedArtwork=function(e,t,n){return e.lineItemsWithoutArtworkIds.length?Promise.resolve(!1):1===e.artworkIds.length?Promise.resolve(!0):(0,u.pendingArtworksForOrder)(e,n.graphApiOptions).then(function(e){return!(0,o.isEmpty)(e)&&p(t,e)})},function(e,t){return 1===t.length&&+t[0]===+e.id})},1290:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=o(s),f=n(1282),d=n(1289),p=r(d),h=n(1291),m=r(h),v=n(1286),y=r(v),_=n(1292),b=o(_),g=n(1293),E=o(g),O=n(1297),w=o(O),P=n(1300),A=o(P),k=n(1301),T=o(k),C=n(1302),j=o(C),M=n(266),N=o(M),S=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleApprovalInitiated=n.toggleApprovalInitiated.bind(n),n.toggleChangesForm=n.toggleChangesForm.bind(n),n.cancelRequestingChanges=n.cancelRequestingChanges.bind(n),n.toggleAddFeedback=n.toggleAddFeedback.bind(n),n.triggerOrderCompletion=n.triggerOrderCompletion.bind(n),n.state={approvalInitiated:!1,canMutate:!0,communicationError:!1,requestingChanges:!1,showApprovalWarning:!1,annotating:!1},n}return u(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.order,n=e.revision,r=e.artwork,o=e.config,a=e.t;return c.default.createElement("div",{id:"proof-revision"},this.renderPreview(this.props),this.showShareToolbar(t,r,n)?c.default.createElement(j.default,{containerClasses:"share-buttons clear",shareableUrl:o.shared_artwork_url,size:"medium",t:a,twitterSharingText:o.share_twitter_text}):"",this.renderCustomerOperations(this.props),this.renderCommunicationErrorModal(r,o,a))}},{key:"renderPreview",value:function(e){var t=e.revision,n=e.t,r=e.dispatch,o=e.artwork,a=t.proof_large_url,i=t.proof_retina_fallback_url,u=t.proof_retina_url,l=t.title,s=t.annotations,f=y.isRedraw(t),d=!p.isLatestRevision(o,t)||!p.readyForCustomerAction(o,t);return c.default.createElement(E.default,{annotating:this.state.annotating,annotations:s,dispatch:r,hideAnnotations:d,proofSrc:f?a:i,proofSrcSet:f?"":u,proofTitle:l,t:n})}},{key:"currentRevisionApproved",value:function(e,t){return p.isLatestRevision(e,t)&&y.isApproved(t)}},{key:"renderCustomerOperations",value:function(e){var t=e.order,n=e.artwork,r=e.revision,o=e.customer,a=e.dispatch,i=e.config,u=e.t;if(p.readyForCustomerAction(n,r)){if(this.state.showApprovalWarning)return this.renderConfirmApproval(u);if(this.state.requestingChanges)return this.renderChangeForm(n,o,a,u,i);if(m.canUndo(t,n))return this.renderUndo(u);if(!y.inFinalState(r))return this.renderButtons(t,n,i,u,this.state.approvalInitiated)}}},{key:"renderCommunicationErrorModal",value:function(e,t,n){if(!p.inFinalState(e))return c.default.createElement(A.default,{closeModal:this.toggleApprovalInitiated,config:t,source:"approval",t:n,visible:this.state.communicationError})}},{key:"renderConfirmApproval",value:function(e){return c.default.createElement(w.default,{approveMockup:this.triggerOrderCompletion,isShippable:this.props.order.isShippable,t:e,toggleChangesForm:this.toggleChangesForm})}},{key:"renderUndo",value:function(e){return c.default.createElement("div",null,c.default.createElement(T.default,{t:e,toggleChangesForm:this.toggleChangesForm}))}},{key:"renderButtons",value:function(e,t,n,r,o){var a=this;return c.default.createElement("div",{id:"proof-approve-or-request"},c.default.createElement("button",{className:"button large primary proof-button-approve "+(o?"loading":""),onClick:function(r){return a.initiateApproval(e,t,n,r)}},r("approve")),c.default.createElement("div",{className:"other-option"},c.default.createElement("span",{className:"or hidden-lg-down"},r("or")," "),c.default.createElement(N.default,{id:"request_changes",onClick:this.toggleChangesForm},r("request_changes"))))}},{key:"showShareToolbar",value:function(e,t,n){return e.complete&&this.currentRevisionApproved(t,n)}},{key:"toggleChangesForm",value:function(e){e.preventDefault(),this.setState({requestingChanges:!this.state.requestingChanges,showApprovalWarning:!1,approvalInitiated:!1})}},{key:"toggleAddFeedback",value:function(e){this.setState({annotating:!this.state.annotating}),e.preventDefault()}},{key:"toggleApprovalInitiated",value:function(){this.setState({approvalInitiated:!this.state.approvalInitiated,communicationError:!1,requestingChanges:!1,showApprovalWarning:!1,annotating:!1})}},{key:"renderOrderApprovalWarning",value:function(e){p.inFinalState(e)||this.setState({showApprovalWarning:!0})}},{key:"renderChangeForm",value:function(e,t,n,r,o){var a=this;return c.default.createElement(b.default,{addFeedbackEventHandler:this.toggleAddFeedback,annotating:this.state.annotating,annotationCount:this.props.revision.annotations.length,artwork:e,config:o,customer:t,dispatch:n,hideFormEventHandler:this.cancelRequestingChanges,onSubmit:function(){return a.setState({annotating:!1})},t:r})}},{key:"cancelRequestingChanges",value:function(e){e.preventDefault(),this.setState({requestingChanges:!1,showApprovalWarning:!1,approvalInitiated:!1,annotating:!1})}},{key:"initiateApproval",value:function(e,t,n,r){var o=this;r.preventDefault(),this.toggleApprovalInitiated(),
this.props.dispatch((0,f.fetchPendingLineItems)()).then(function(){return m.handlePaymentsCapture(e,t,n)}).then(function(e){e?o.renderOrderApprovalWarning(t):o.dispatchApproval()}).catch(function(e){return o.failedToCommunicate(e)})}},{key:"failedToCommunicate",value:function(e){this.setState({communicationError:!0,canMutate:!1}),console.error(e)}},{key:"dispatchApproval",value:function(){this.props.dispatch((0,f.recentApproval)())}},{key:"triggerOrderCompletion",value:function(e){e.preventDefault(),this.props.handlePaymentRequest()}}]),t}(s.PureComponent);t.default=S},1291:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.handlePaymentsCapture=t.canUndo=t.fetchApprovedArtworks=void 0;var o=n(1289),a=r(o),i=n(145);t.fetchApprovedArtworks=function(e,t){return(0,i.approvedArtworksForOrder)(e,t.graphApiOptions)},t.canUndo=function(e,t){return a.isComplete(t)&&!e.readOnly},t.handlePaymentsCapture=function(e,t,n){return e.complete?Promise.resolve(!1):a.isLastUnapprovedArtwork(e,t,n)}},1292:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(76),f=n(657),d=r(f),p=n(658),h=r(p),m=n(659),v=n(1282),y=n(219),_=r(y),b=n(266),g=r(b),E=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fieldChanged=n.fieldChanged.bind(n),n.submitChanges=n.submitChanges.bind(n),n.toggleModal=n.toggleModal.bind(n),n.triggerUpload=n.triggerUpload.bind(n),n.onAttachFileClick=n.onAttachFileClick.bind(n),n.fileInputRef=s.default.createRef(),n.state={submitting:!1,uploading:!1},n}return i(t,e),u(t,[{key:"onAttachFileClick",value:function(){this.fileInputRef.current&&this.fileInputRef.current.triggerFileInput()}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.artwork,r=e.hideFormEventHandler,o=e.config,a=e.addFeedbackEventHandler,i=(0,c.last)(n.uploadedFiles);return s.default.createElement("div",{id:"reject_artwork_revision"},s.default.createElement("div",{className:"reject-artwork-buttons"},s.default.createElement("button",{onClick:this.onAttachFileClick},s.default.createElement("i",{className:"fa fa-attach"}),t("choose_file")),s.default.createElement("button",{className:this.props.annotating?"selected":"",onClick:a},s.default.createElement("i",{className:"fa fa-plus"}),t("add_annotation")," ",this.props.annotationCount>0?"("+this.props.annotationCount+")":"")),s.default.createElement("div",{style:{position:"relative"}},s.default.createElement("div",{className:"field"},s.default.createElement("textarea",{autoFocus:!0,className:"artwork_instructions",id:"artwork_instructions",name:"artworkInstructions",onChange:this.fieldChanged,placeholder:t("let_us_know_change"),required:"required",rows:"5",value:i.artworkInstructions}),i&&i.fileName&&s.default.createElement("div",{className:"uploaded-filename"},s.default.createElement("i",{className:"fa fa-attach"}),i.fileName))),s.default.createElement("div",{className:"only-lg-down"},s.default.createElement(d.default,{ref:this.fileInputRef,artwork:i,clearOnTrigger:!0,id:"new_revision_artwork",t:t,triggerUpload:this.triggerUpload})),this.renderProgressBar(i),this.renderError(i,t,o),s.default.createElement("p",{id:"reject-artwork-buttons"},s.default.createElement("button",{className:"button large primary "+(this.state.submitting?"loading":""),disabled:!this.formValid(i)||i.state===m.STATE_UPLOADING,onClick:this.submitChanges},t("submit_feedback")),s.default.createElement("span",{className:"other-option"},s.default.createElement("span",{className:"or hidden-lg-down"},t("or")," "),s.default.createElement(g.default,{className:"cancel",onClick:r},t("cancel")))))}},{key:"formValid",value:function(e){return e.artworkInstructions||this.props.annotationCount>0}},{key:"triggerUpload",value:function(e){var t=e.target;if(t instanceof HTMLInputElement){var n=this.props.artwork,r=n.artwork_path,o=n.uploadedFiles,a=(0,c.last)(o);this.setState({uploading:!0}),this.props.dispatch((0,v.uploadFile)(t.files[0],a.id,r))}}},{key:"renderProgressBar",value:function(e){var t=e.id,n=e.percentage;if(n&&0!==+n)return s.default.createElement(h.default,{id:t,percent:n})}},{key:"toggleModal",value:function(){this.setState({uploading:!1})}},{key:"renderError",value:function(e,t,n){var r=e.state===m.STATE_FAILED&&this.state.uploading;return s.default.createElement(_.default,{className:"center-text",id:"failed-upload-modal",onClose:this.toggleModal,visible:r},s.default.createElement("h2",null,t("upload_failed_title")),s.default.createElement("p",{dangerouslySetInnerHTML:{__html:t("upload_failed_body",{contact_link:n.contact_us_link})}}),s.default.createElement("button",{className:"button secondary medium",onClick:this.toggleModal},t("close")))}},{key:"submitChanges",value:function(){this.setState({submitting:!0}),this.props.dispatch((0,v.requestChanges)()),this.props.onSubmit&&this.props.onSubmit()}},{key:"fieldChanged",value:function(e){var t=e.target;if(t instanceof HTMLTextAreaElement){var n=this.props.artwork,r=(0,c.last)(n.uploadedFiles);this.props.dispatch((0,v.updateArtwork)(t.name,t.value,r.id))}}}]),t}(l.PureComponent);t.default=E},1293:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(4),p=o(d),h=n(1282),m=n(1294),v=r(m),y=n(1296),_=r(y),b=function(e){function t(e){i(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.annotateOverlayRef=p.createRef(),n.tooltipRef=p.createRef(),n.imageRef=p.createRef(),n.onDeleteAnnotation=n.onDeleteAnnotation.bind(n),n.onAddAnnotation=n.onAddAnnotation.bind(n),n.onCancelAnnotateComment=n.onCancelAnnotateComment.bind(n),n.onUpdateAnnotateComment=n.onUpdateAnnotateComment.bind(n),n.onAnnotationClick=n.onAnnotationClick.bind(n),n.onNewAnnotationPlaced=n.onNewAnnotationPlaced.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.onMouseEnter=n.onMouseEnter.bind(n),n.updatePosition=n.updatePosition.bind(n),n.startUpdatingTooltipPosition=n.startUpdatingTooltipPosition.bind(n),n.state={annotateMode:"none",currentAnnotation:null,tracking:!1,showInitialTooltip:!0,annotating:e.annotating},n.mouseX=0,n.mouseY=0,n}return l(t,e),f(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return t.annotating!==e.annotating?c({},t,{showInitialTooltip:!0,annotating:e.annotating,annotateMode:"none",currentAnnotation:null,tracking:!1}):null}}]),f(t,[{key:"getNextId",value:function(){return 0===this.props.annotations.length?1:Math.max.apply(Math,a(this.props.annotations.map(function(e){return e.id})))+1}},{key:"onDeleteAnnotation",value:function(){this.state.currentAnnotation&&(0,h.removeAnnotation)(this.props.dispatch,this.state.currentAnnotation.id),this.resetMode()}},{key:"resetMode",value:function(){this.setState({annotateMode:"none",currentAnnotation:null})}},{key:"onAddAnnotation",value:function(e){(0,h.addAnnotation)(this.props.dispatch,c({},this.state.currentAnnotation,{text:e})),this.resetMode()}},{key:"onUpdateAnnotateComment",value:function(e){(0,h.updateAnnotation)(this.props.dispatch,c({},this.state.currentAnnotation,{text:e})),this.resetMode()}},{key:"onCancelAnnotateComment",value:function(){this.resetMode()}},{key:"onAnnotationClick",value:function(e){var t=this.props.annotations.find(function(t){return t.id===e.id});this.setState({annotateMode:"editing",currentAnnotation:t})}},{key:"onNewAnnotationPlaced",value:function(e){if(e.target===e.currentTarget&&this.props.annotating){var t=this.annotateOverlayRef.current;if(t){var n=t.getBoundingClientRect(),r=this.getOffsetXY(e),o=s(r,2),a=o[0],i=o[1],u=a/n.width*100,l=i/n.height*100;this.setState({annotateMode:"adding",currentAnnotation:{id:this.getNextId(),text:"",x:u,y:l}})}}}},{key:"updatePosition",value:function(){var e=this.annotateOverlayRef.current,t=this.imageRef.current;if(e&&t){var n=t.getBoundingClientRect();e.style.width=n.width+"px",e.style.height=n.height+"px"}}},{key:"componentDidMount",value:function(){this.updatePosition(),window.addEventListener("resize",this.updatePosition)}},{key:"startUpdatingTooltipPosition",value:function(){var e=this;if(this.props.annotating){var t=function t(){if(e.state.tracking){var n=e.tooltipRef.current;if(n){var r=15;n.style.left=e.mouseX+r+"px",n.style.top=e.mouseY-r+"px",window.requestAnimationFrame(t)}}};window.requestAnimationFrame(t)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updatePosition)}},{key:"onMouseEnter",value:function(e){this.setState({tracking:!0,showInitialTooltip:!1}),this.startUpdatingTooltipPosition()}},{key:"getOffsetXY",value:function(e){return[e.nativeEvent.offsetX,e.nativeEvent.offsetY]}},{key:"onMouseMove",value:function(e){if(this.state.tracking){var t=this.annotateOverlayRef.current;if(t){var n=t.getBoundingClientRect(),r=e.pageX-n.left-window.pageXOffset,o=e.pageY-n.top-window.pageYOffset;this.mouseX=r,this.mouseY=o}}}},{key:"isTooltipVisible",value:function(){return this.props.annotating&&"none"===this.state.annotateMode&&this.state.tracking}},{key:"renderTooltip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props.t;return p.createElement("div",{ref:this.tooltipRef,className:"annotation-tooltip",style:{display:this.isTooltipVisible()?"block":"none"}},e&&p.createElement("i",{className:"fa fa-plus"}),t("click_to_add_instructions"))}},{key:"renderInitialTooltip",value:function(){if(!this.state.showInitialTooltip||!this.props.annotating)return null;var e=this.props.t;return p.createElement("div",{className:"annotation-tooltip-initial"},p.createElement("i",{className:"fa fa-plus"}),e("click_to_add_instructions"))}},{key:"getAnnotations",value:function(){var e=this,t=this.state.currentAnnotation,n=[].concat(a(this.props.annotations)).map(function(t){return c({},t,{onClick:e.onAnnotationClick.bind(e,t)})});return t?[].concat(a(n.filter(function(e){return e.id!==t.id})),[c({},t,{onClick:function(){}})]):n}},{key:"renderProofImage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p.createElement("img",{ref:this.imageRef,alt:this.props.proofTitle,id:"proof-image",onLoad:t?function(){e.updatePosition()}:null,src:this.props.proofSrc,srcSet:this.props.proofSrcSet})}},{key:"render",value:function(){var e=this;if(this.props.hideAnnotations)return this.renderProofImage();var t=this.state.annotateMode;return p.createElement("div",{style:{position:"relative"}},this.renderInitialTooltip(),p.createElement("div",{ref:this.annotateOverlayRef,className:"annotation-overlay only-lg",onMouseEnter:this.onMouseEnter,onMouseLeave:function(){return e.setState({tracking:!1})},onMouseMove:this.onMouseMove,style:{cursor:this.props.annotating?"crosshair":"default"}},this.renderTooltip(),this.renderAnnotationPoints(),"adding"===t&&this.renderAddAnnotation(),"editing"===t&&this.renderEditAnnotation()),this.renderProofImage(!0))}},{key:"renderAnnotationPoints",value:function(){var e=this.getAnnotations();return p.createElement("div",{className:"annotation-points-container",onClick:this.onNewAnnotationPlaced},this.renderAnnotations(e))}},{key:"renderAddAnnotation",value:function(){return p.createElement(v.default,{annotateOverlayRef:this.annotateOverlayRef,annotation:this.state.currentAnnotation,onCancel:this.onCancelAnnotateComment,onSubmit:this.onAddAnnotation,t:this.props.t})}},{key:"renderEditAnnotation",value:function(){return p.createElement(_.default,{annotateOverlayRef:this.annotateOverlayRef,annotation:this.state.currentAnnotation,onCancel:this.onCancelAnnotateComment,onDelete:this.onDeleteAnnotation,onSave:this.onUpdateAnnotateComment,t:this.props.t})}},{key:"onAnnotationPointMouseEnter",value:function(e){this.setState({tracking:!1})}},{key:"onAnnotationPointMouseLeave",value:function(e){this.setState({tracking:!0}),this.startUpdatingTooltipPosition()}},{key:"renderAnnotations",value:function(e){var t=this,n=this.state.currentAnnotation&&this.state.currentAnnotation.id;return e.map(function(e){return p.createElement("div",{key:""+e.id,className:e.id===n?"annotation-point-selected":"annotation-point",onClick:e.onClick,onMouseEnter:t.onAnnotationPointMouseEnter.bind(t),onMouseLeave:t.onAnnotationPointMouseLeave.bind(t),onMouseMove:function(e){return e.stopPropagation()},style:{top:e.y+"%",left:e.x+"%"}},e.id)})}}]),t}(p.PureComponent);t.default=b},1294:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=o(s),f=n(266),d=r(f),p=n(1295),h=r(p),m=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.textAreaRef=c.createRef(),n.onTextChange=n.onTextChange.bind(n),n.onSubmit=n.onSubmit.bind(n),n.onUpdate=n.onUpdate.bind(n),n.state={text:""},n}return u(t,e),l(t,[{key:"onUpdate",value:function(){this.textAreaRef.current&&this.textAreaRef.current.focus()}},{key:"onTextChange",value:function(e){this.setState({text:e.currentTarget.value})}},{key:"onSubmit",value:function(){this.props.onSubmit&&this.props.onSubmit(this.state.text)}},{key:"render",value:function(){var e=this.props,t=e.annotation,n=e.t;if(!t)return null;var r=this.state.text;return c.createElement(h.default,{onUpdateCallback:this.onUpdate,overlayRef:this.props.annotateOverlayRef,x:t.x,y:t.y},c.createElement("textarea",{ref:this.textAreaRef,onChange:this.onTextChange,placeholder:n("what_needs_to_be_changed"),rows:"3",value:r}),c.createElement("div",{className:"annotation-buttons-container"},c.createElement("button",{className:"tiny light post-button",disabled:!r||""===r.trim(),onClick:this.onSubmit},n("post")),c.createElement(d.default,{className:"cancel-button",onClick:this.props.onCancel},n("cancel"))))}}]),t}(c.PureComponent);t.default=m},1295:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),f=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.containerRef=c.createRef(),n.updatePosition=n.updatePosition.bind(n),n.state={x:"0px",y:"0px"},n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.updatePosition(),window.addEventListener("resize",this.updatePosition)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updatePosition)}},{key:"updatePosition",value:function(){var e=this,t=this.props.overlayRef.current;if(t){var n=this.containerRef.current;if(n){var r=t.parentElement;if(r){var o=this.getWidthHeight(t),a=u(o,2),i=a[0],l=a[1],s=this.getWidthHeight(n),c=u(s,2),f=c[0],d=c[1],p=this.props,h=p.x,m=p.y,v=i*(h/100),y=l*(m/100),_=30,b=10,g=0;document.documentElement&&(g=document.documentElement.clientWidth-i);var E=v-f-b,O=y-(d-_)/2;E<0&&Math.abs(E)>g/2-2*b&&(E=v+_+b),this.setState({x:E+"px",y:O+"px"},function(){e.props.onUpdateCallback&&e.props.onUpdateCallback()})}}}}},{key:"getWidthHeight",value:function(e){var t=e.getBoundingClientRect();return[t.width,t.height]}},{key:"componentDidUpdate",value:function(e){this.props.x===e.x&&this.props.y===e.y||this.updatePosition()}},{key:"render",value:function(){var e={left:this.state.x,top:this.state.y};return c.createElement("div",{ref:this.containerRef,className:"annotate-popup",style:e},this.props.children)}}]),t}(c.PureComponent);t.default=f},1296:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(4),f=o(c),d=n(266),p=r(d),h=n(1295),m=r(h),v=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.textAreaRef=f.createRef(),n.onAnnotationEditClick=n.onAnnotationEditClick.bind(n),n.onTextChange=n.onTextChange.bind(n),n.onSave=n.onSave.bind(n),n.state={mode:"editing",text:e.annotation?e.annotation.text:"",annotation:e.annotation},n}return u(t,e),s(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){if(e.annotation&&t.annotation)return t.annotation.id!==e.annotation.id?l({},t,{text:e.annotation.text,annotation:e.annotation}):null}}]),s(t,[{key:"onTextChange",value:function(e){this.setState({text:e.currentTarget.value})}},{key:"onAnnotationEditClick",value:function(){var e=this;this.setState({mode:"editing_text"},function(){var t=e.textAreaRef.current;t&&(t.focus(),t.setSelectionRange(t.value.length,t.value.length),t.scrollTop=t.scrollHeight)})}},{key:"onSave",value:function(){this.setState({mode:"editing"}),this.props.onSave&&this.props.onSave(this.state.text)}},{key:"renderEditText",value:function(){var e=this.props,t=e.annotation,n=e.t;if(!t)return null;var r=this.state.text;return f.createElement(m.default,{overlayRef:this.props.annotateOverlayRef,x:t.x,y:t.y},f.createElement("textarea",{ref:this.textAreaRef,onChange:this.onTextChange,placeholder:n("what_needs_to_be_changed"),rows:"3",value:r}),f.createElement("div",{className:"annotation-buttons-container"},f.createElement("button",{className:"tiny light save-button",disabled:!r||""===r.trim(),onClick:this.onSave},n("save")),f.createElement(p.default,{className:"cancel-button",onClick:this.props.onCancel},n("cancel"))))}},{key:"renderViewText",value:function(){var e=this.props,t=e.annotation,n=e.t;return t?f.createElement(m.default,{overlayRef:this.props.annotateOverlayRef,x:t.x,y:t.y},f.createElement("div",{className:"annotation-text"},this.state.text),f.createElement("div",{className:"annotation-buttons-container"},f.createElement(p.default,{className:"delete-button",onClick:this.props.onDelete},n("delete")),f.createElement(p.default,{className:"edit-button",onClick:this.onAnnotationEditClick},n("edit")))):null}},{key:"render",value:function(){return"editing_text"===this.state.mode?this.renderEditText():this.renderViewText()}}]),t}(f.PureComponent);t.default=v},1297:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(1298),f=r(c),d=n(1299),p=r(d),h=n(266),m=r(h),v=n(669),y=r(v),_=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={submitting:!1},n}return i(t,e),u(t,[{key:"componentDidMount",value:function(){(0,p.default)(y.default.find("#confirm-approval-inline"))}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.approveMockup,r=e.isShippable,o=e.toggleChangesForm;return s.default.createElement("div",{className:"white-box br-10",id:"confirm-approval-inline"},s.default.createElement("h2",null,t("review_carefully")),s.default.createElement("p",null,t("start_production")),s.default.createElement(f.default,{action:n,id:"approve",message:t(r?"start_production_button":"Confirm_approval")}),s.default.createElement("p",{className:"other-option"},s.default.createElement("span",{className:"or hidden-lg-down"},t("or")," "),s.default.createElement(m.default,{onClick:o},t("request_changes"))))}}]),t}(l.PureComponent);t.default=_},1298:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(669),f=r(c),d=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.positionOverlay=n.positionOverlay.bind(n),n}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this.positionOverlay(),window.addEventListener("scroll",this.positionOverlay),window.addEventListener("resize",this.positionOverlay)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.positionOverlay),window.removeEventListener("resize",this.positionOverlay)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.action,r=e.message;return s.default.createElement("button",{className:"button large primary mobile-block",id:"complete-button-"+t,onClick:n,type:"button"},r)}},{key:"positionOverlay",value:function(){var e=f.default.find("#complete-button-"+this.props.id),t=f.default.find("#payment-overlay");if(null!=e&&null!=t){var n={top:Math.round(e.getBoundingClientRect().top),left:Math.round(e.getBoundingClientRect().left),width:e.offsetWidth,height:e.offsetHeight};t.style.top=n.top+"px",t.style.left=n.left+"px",t.style.width=n.width+"px",t.style.height=n.height+"px"}}}]),t}(l.PureComponent);t.default=d},1299:function(e,t){function n(e){return"requestAnimationFrame"in window?window.requestAnimationFrame(e):void setTimeout(e,16)}function r(e,t,n){e.self===e?e.scrollTo(t,n):(e.scrollLeft=t,e.scrollTop=n)}function o(e,t,n){var r,o,a,i,u,l,s,c=e.getBoundingClientRect(),f=n&&null!=n.left?n.left:.5,d=n&&null!=n.top?n.top:.5,p=n&&null!=n.leftOffset?n.leftOffset:0,h=n&&null!=n.topOffset?n.topOffset:0,m=f,v=d;if(t.self===t)l=Math.min(c.width,t.innerWidth),s=Math.min(c.height,t.innerHeight),o=c.left+t.pageXOffset-t.innerWidth*m+l*m,a=c.top+t.pageYOffset-t.innerHeight*v+s*v,o-=p,a-=h,i=o-t.pageXOffset,u=a-t.pageYOffset;else{l=c.width,s=c.height,r=t.getBoundingClientRect();var y=c.left-(r.left-t.scrollLeft),_=c.top-(r.top-t.scrollTop);o=y+l*m-t.clientWidth*m,a=_+s*v-t.clientHeight*v,o=Math.max(Math.min(o,t.scrollWidth-t.clientWidth),0),a=Math.max(Math.min(a,t.scrollHeight-t.clientHeight),0),o-=p,a-=h,i=o-t.scrollLeft,u=a-t.scrollTop}return{x:o,y:a,differenceX:i,differenceY:u}}function a(e){var t=e._scrollSettings;if(t){var i=o(t.target,e,t.align),u=Date.now()-t.startTime,l=Math.min(1/t.time*u,1);if(u>t.time&&t.endIterations>3)return r(e,i.x,i.y),e._scrollSettings=null,t.end(s);t.endIterations++;var c=1-t.ease(l);return r(e,i.x-i.differenceX*c,i.y-i.differenceY*c),u>=t.time?a(e):void n(a.bind(null,e))}}function i(e,t,n,r){function o(e){t._scrollSettings=null,t.parentElement&&t.parentElement._scrollSettings&&t.parentElement._scrollSettings.end(e),r(e),t.removeEventListener("touchstart",i,{passive:!0}),t.removeEventListener("wheel",i,{passive:!0})}var i,u=!t._scrollSettings,l=t._scrollSettings,s=Date.now();l&&l.end(c),t._scrollSettings={startTime:l?l.startTime:Date.now(),endIterations:0,target:e,time:n.time+(l?s-l.startTime:0),ease:n.ease,align:n.align,end:o},i=o.bind(null,c),t.addEventListener("touchstart",i,{passive:!0}),t.addEventListener("wheel",i,{passive:!0}),u&&a(t)}function u(e){return"pageXOffset"in e||(e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth)&&"hidden"!==getComputedStyle(e).overflow}function l(){return!0}var s="complete",c="canceled";e.exports=function(e,t,n){function r(e){a--,a||n&&n(e)}if(e){"function"==typeof t&&(n=t,t=null),t||(t={}),t.time=isNaN(t.time)?1e3:t.time,t.ease=t.ease||function(e){return 1-Math.pow(1-e,e/2)};for(var o=e.parentElement,a=0,c=t.validTarget||l,f=t.isScrollable;o;){if(c(o,a)&&(f?f(o,u):u(o))&&(a++,i(e,o,t,r)),o=o.parentElement,!o){a||n&&n(s);break}"BODY"===o.tagName&&(o=o.ownerDocument,o=o.defaultView||o.ownerWindow)}}}},1300:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(219),f=r(c),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.config,n=e.t,r=e.visible,o=e.closeModal,a=e.source;return s.default.createElement(f.default,{className:"center-text",id:"artisan_communication_failure_"+a,onClose:o,visible:r},s.default.createElement("h2",null,n("we_are_sorry")),s.default.createElement("p",null,n("communication_failed")),s.default.createElement("p",{
dangerouslySetInnerHTML:{__html:n("artisan_failure_help",{contact_link:t.contact_us_link})}}),s.default.createElement("p",null,s.default.createElement("button",{className:"button large primary mobile-block modal-error",onClick:o,type:"button"},n("ok"))))}}]),t}(l.Component);t.default=d},1301:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.showChangesForm=e.showChangesForm.bind(e),e}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props.t;return s.default.createElement("div",{className:"approved-extra"},s.default.createElement("h4",null,e("need_make_changes")),s.default.createElement("p",{dangerouslySetInnerHTML:{__html:e("need_make_changes_request",{request_changes_link:this.renderLink(e)})},onClick:this.showChangesForm}))}},{key:"renderLink",value:function(e){return"<a href='#' rel='request-changes' class='lowercase'>"+e("request_changes")+"</a>"}},{key:"showChangesForm",value:function(e){e.preventDefault(),e.target instanceof HTMLElement&&"request-changes"===e.target.getAttribute("rel")&&this.props.toggleChangesForm(e)}}]),t}(l.PureComponent);t.default=c},1302:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=r(o),i=n(4),u=r(i),l=n(220),s=function(e){var t=e.containerClasses,n=e.isFlat,r=e.shareableUrl,o=e.size,a=e.t,i=e.twitterSharingText;return u.default.createElement("div",{className:t},u.default.createElement(c,{isFlat:n,shareableUrl:r,size:o,t:a,twitterSharingText:i}),u.default.createElement(f,{isFlat:n,shareableUrl:r,size:o,t:a}))},c=function(e){var t=e.isFlat,n=e.shareableUrl,r=e.size,o=e.t,a=e.twitterSharingText;return u.default.createElement(d,{href:"http://twitter.com/share?url="+encodeURIComponent(n)+"&text="+a,id:"birdie_link",isFlat:t,label:o("tweet"),name:"twitter",size:r})},f=function(e){var t=e.isFlat,n=e.shareableUrl,r=e.size,o=e.t;return u.default.createElement(d,{href:"http://www.facebook.com/share.php?u="+encodeURIComponent(n),id:"fencehook_link",isFlat:t,label:o("share"),name:"facebook",size:r})},d=function(e){var t=e.href,n=e.id,r=e.isFlat,o=e.label,a=e.name,i=e.size;return u.default.createElement("a",{className:(0,l.pretty)("button",a,i,{flat:r}),href:t,id:n,onClick:p,rel:"noopener noreferrer",target:"_blank"},u.default.createElement("i",{className:(0,l.pretty)("fa","fa-"+a)})," ",o)},p=function(e){e.preventDefault();var t=e.currentTarget;a.default.open(t.getAttribute("href")||t.dataset.href,t.getAttribute("id")+"_window","width=600,height=500")};t.default=s},1303:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(4),f=r(c),d=n(1282),p=n(219),h=r(p),m=n(655),v=r(m),y=n(1289),_=n(1291),b=n(1304),g=r(b),E=n(1305),O=r(E),w=n(1300),P=r(w),A=n(1306),k=r(A),T=n(1307),C=r(T),j=n(1310),M=r(j),N=n(266),S=r(N),I=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cancelItem=n.cancelItem.bind(n),n.cancelItemAndCompleteOrder=n.cancelItemAndCompleteOrder.bind(n),n.hideCancellationOptions=n.hideCancellationOptions.bind(n),n.showCancellationOptions=n.showCancellationOptions.bind(n),n.toggleDetails=n.toggleDetails.bind(n),n.toggleEditModal=n.toggleEditModal.bind(n),n.state={cancellationRequired:!1,canMutate:!0,communicationError:!1,editingLineItem:!1,hasApprovedArtworks:!1,isRefreshingApprovalState:!1,lastUnapprovedArtwork:!0,detailsVisible:!1},n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.order,n=e.artwork,r=e.config;this.refreshApprovalState(t,n,r)}},{key:"failedToCommunicate",value:function(e){this.setState({communicationError:!0,canMutate:!1}),console.error(e)}},{key:"refreshApprovalState",value:function(e,t,n){var r=this;return this.setState({communicationError:!1,canMutate:!0}),Promise.all([(0,_.fetchApprovedArtworks)(e,n),(0,y.isLastUnapprovedArtwork)(e,t,n)]).then(function(e){var t=l(e,2),n=t[0],o=t[1];r.setState({lastUnapprovedArtwork:o,hasApprovedArtworks:n.length>0,isRefreshingApprovalState:!1})}).catch(function(e){return r.failedToCommunicate(e)})}},{key:"render",value:function(){var e=this.state.detailsVisible,t=this.props,n=t.t,r=t.artwork,o=t.revision,a=t.order,i=t.config,u=t.locale,l=a.readOnly,s=!(0,y.inFinalState)(r)&&!l,d=s,p=s&&!r.sample;return f.default.createElement("div",{id:"proof-summary"},f.default.createElement("div",{className:"line-item-row"},f.default.createElement(M.default,{artwork:r,canEditQuantity:p,revision:o,t:n,toggleEditModal:this.toggleEditModal}),f.default.createElement("div",{className:"toggle-order-details",onClick:this.toggleDetails},f.default.createElement("strong",null,n("order_details")),f.default.createElement(v.default,{name:"angle-"+(e?"up":"down")}))),f.default.createElement("div",{className:"details-group-transition "+(e?"open":"")},f.default.createElement("div",{className:"details-group"},f.default.createElement("h4",null,n("order")," ",f.default.createElement(S.default,{href:i.orderUrl},a.orderNumber)),f.default.createElement(C.default,{artwork:r,config:i,lineItemId:r.lineItem.id,locale:u,order:a,revision:o,t:n}),d&&this.renderCancelLink(n))),s&&f.default.createElement(c.Fragment,null,this.renderEditModal(this.state.editingLineItem),this.renderCancelItemModal(n),this.renderCancelAndCompleteOrderModal(n),this.renderCommunicationErrorModal(i,n)))}},{key:"renderEditModal",value:function(e){return f.default.createElement(h.default,{id:"edit-line-item-modal",onClose:this.toggleEditModal,visible:e},f.default.createElement(g.default,u({},this.props,{toggleEditModal:this.toggleEditModal})))}},{key:"renderCancelLink",value:function(e){return f.default.createElement(S.default,{className:this.state.isRefreshingApprovalState?"loading loading-link":"",id:"proof-cancel-link",onClick:this.showCancellationOptions},e("cancel_this_item"))}},{key:"renderCancelItemModal",value:function(e){var t=this.showCancelModal()&&!this.willProduce();return f.default.createElement(O.default,{cancelItem:this.cancelItem,isLastUnapprovedArtwork:this.state.lastUnapprovedArtwork,t:e,toggleModal:this.hideCancellationOptions,visible:t})}},{key:"renderCommunicationErrorModal",value:function(e,t){var n=this,r=this.showCommunicationErrorModal()&&!this.willProduce();return f.default.createElement(P.default,{closeModal:function(){return n.setState({communicationError:!1})},config:e,source:"cancellation",t:t,visible:r})}},{key:"renderCancelAndCompleteOrderModal",value:function(e){var t=this.showCancelModal()&&this.willProduce();return f.default.createElement(k.default,{cancelItem:this.cancelItemAndCompleteOrder,t:e,toggleModal:this.hideCancellationOptions,visible:t})}},{key:"toggleDetails",value:function(){this.setState({detailsVisible:!this.state.detailsVisible})}},{key:"toggleEditModal",value:function(e){e&&e.preventDefault(),this.setState({editingLineItem:!this.state.editingLineItem,cancellationRequired:!1})}},{key:"hideCancellationOptions",value:function(){this.setState({cancellationRequired:!1,editingLineItem:!1})}},{key:"showCancellationOptions",value:function(){var e=this.props,t=e.order,n=e.artwork,r=e.config;this.refreshApprovalState(t,n,r).then(this.setState({cancellationRequired:!0,editingLineItem:!1,isRefreshingApprovalState:!0}))}},{key:"willProduce",value:function(){return this.state.lastUnapprovedArtwork&&this.state.canMutate&&this.state.hasApprovedArtworks}},{key:"showCancelModal",value:function(){return!this.state.isRefreshingApprovalState&&this.state.canMutate&&this.state.cancellationRequired}},{key:"showCommunicationErrorModal",value:function(){return!this.state.isRefreshingApprovalState&&this.state.communicationError}},{key:"cancelItemAndCompleteOrder",value:function(){var e=this;this.cancelItem(function(){e.props.handlePaymentRequest()})}},{key:"cancelItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.props.dispatch((0,d.cancelItem)(e))}}]),t}(c.PureComponent);t.default=I},1304:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),f=n(1079),d=r(f),p=n(1282),h=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onQuantityChange=n.onQuantityChange.bind(n),n.updateQuantity=n.updateQuantity.bind(n),n.state={selectedQuantity:n.props.artwork.lineItem.quantity},n}return i(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.rates,n=e.currency,r=e.artwork.lineItem,o=e.revision,a=o.width,i=o.height,l=o.product,s=e.locale,f=e.order.cart.cartItems,p=e.t,h={width:a,height:i},m=f.find(function(e){return e.id===r.cartItemId}),v=u({type:"custom"},l,{currency:n,pricing:l.pricing});return c.default.createElement("div",{className:"standard",id:"product-options"},c.default.createElement(d.default,{currency:n,dimensions:h,locale:s,minPrice:m&&m.minPrice,onQuantityChange:this.onQuantityChange,product:v,quantities:r.product.availableQuantities,quantity:+this.state.selectedQuantity,rates:t,translate:p.productQuantity}),c.default.createElement("button",{ref:"submitItemQuantity",className:"button large blue update-quantity-button",onClick:this.updateQuantity,type:"submit"},p("update")))}},{key:"onQuantityChange",value:function(e){this.setState({selectedQuantity:e})}},{key:"updateQuantity",value:function(){var e=this;this.refs.submitItemQuantity.classList.add("loading"),this.props.dispatch((0,p.updateQuantity)(this.state.selectedQuantity)).then(function(){e.props.toggleEditModal(),e.refs.submitItemQuantity.classList.remove("loading")})}}]),t}(s.PureComponent);t.default=h},1305:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(266),f=r(c),d=n(219),p=r(d),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.cancelItem,n=e.isLastUnapprovedArtwork,r=e.t,o=e.toggleModal,a=e.visible;return s.default.createElement(p.default,{className:"center-text",id:"confirm-cancellation-item-modal",onClose:o,visible:a},s.default.createElement("h2",null,r("are_you_sure")),n&&s.default.createElement("p",null,r("cancel_order_notice")),s.default.createElement("button",{className:"button grey large",onClick:t},r("cancel_this_item")),s.default.createElement("p",{className:"other-option"},s.default.createElement("span",{className:"or hidden-lg-down"},r("or")," "),s.default.createElement(f.default,{className:"modal-cancel",onClick:o},r("go_back"))))}}]),t}(l.Component);t.default=h},1306:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(1298),f=r(c),d=n(266),p=r(d),h=n(219),m=r(h),v=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.visible,r=e.cancelItem,o=e.toggleModal;return s.default.createElement(m.default,{className:"center-text",id:"confirm-cancellation-completion-modal",onClose:o,visible:n},s.default.createElement("h2",null,t("review_carefully")),s.default.createElement("p",null,t("start_production_cancellation")),n?s.default.createElement(f.default,{action:r,id:"cancel",message:t("cancel_this_item")}):"",s.default.createElement("p",{className:"other-option"},s.default.createElement("span",{className:"or hidden-lg-down"},t("or")," "),s.default.createElement(p.default,{className:"modal-cancel",onClick:o},t("go_back"))))}}]),t}(l.Component);t.default=v},1307:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=o(s),f=n(689),d=o(f),p=n(1308),h=r(p),m=n(1309),v=r(m),y=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.order,r=e.revision,o=e.artwork,a=e.locale,i=t.cart,u=n.adjustments,l=n.cart,s=h.updatedCart(l,o,r),f=s.currency,p=h.calculateItemsTotal(s),m=v.removeQuantityAdjustments(u),y=h.calculateTotal(s),b=h.calculateQuantityDiscount(s);return c.default.createElement("ul",{id:"order-details"},c.default.createElement("li",null,t("subtotal"),":"," ",c.default.createElement(d.default,{currency:f,id:"order-subtotal",locale:a,value:p})),m.map(function(e){return _(n,e)&&c.default.createElement("li",{key:"adjustment_"+e.id,className:"adjustment"},i(e.label),":"," ",c.default.createElement(d.default,{currency:f,id:"adjustment_"+e.id,locale:a,value:-e.amountOff}))}),0===b?null:c.default.createElement("li",{key:"quantity_discount",className:"adjustment"},i("quantity_discount"),":"," ",c.default.createElement(d.default,{currency:f,id:"quantity-discount",locale:a,value:b})),c.default.createElement("li",{id:"summary-order-total"},t("order_total"),":"," ",c.default.createElement(d.default,{currency:f,id:"order-total",locale:a,value:y})))}}]),t}(s.PureComponent);t.default=y;var _=function(e,t){var n=e.isShippable,r=t.label;return n||"shipping"!==r}},1308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTotal=t.calculateItemsTotal=t.calculateQuantityDiscount=t.updatedCart=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(90),a=function(e,t,n){var o=t.quantity,a=t.lineItem;if(null==n)return e.cartItems;var i=n.height,u=n.width,l=n.product;return e.cartItems.map(function(e){if(e.id!==a.cartItemId)return e;var t=r({type:"custom-sticker"},e.configuration,{height:i,width:u});return r({},e,{product:l,quantity:o,configuration:t})})};t.updatedCart=function(e,t,n){return r({},e,{cartItems:a(e,t,n)})},t.calculateQuantityDiscount=function(e){var t=(0,o.invoice)(e,e).find(function(e){return"quantity_discount"===e.label});return t?t.price.amount:0},t.calculateItemsTotal=function(e){var t=(0,o.invoice)(e,e),n={amount:0,currency:e.currency};return t.filter(function(e){return"item"===e.type}).map(function(e){return e.price}).reduce(o.sum,n).amount},t.calculateTotal=function(e){var t=(0,o.invoice)(e,e),n=t.find(function(e){return"total"===e.type});return n?n.price.amount:0}},1309:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.removeQuantityAdjustments=function(e){return e.filter(function(e){return"quantity_discount"!==e.label}).map(function(e){return{label:e.label,type:"amount",amountOff:-e.amount,id:e.id}})}},1310:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=r(o),i=n(1289),u=n(1286),l=n(266),s=r(l),c=function(e){var t=e.artwork,n=e.canEditQuantity,r=e.revision,o=e.toggleEditModal,l=e.t,c=null!=r&&(0,i.canShowRevision)(t)?r:t,f=c.dimensions,d=c.description;return a.default.createElement("ul",{className:"line-item-details"},a.default.createElement("li",null,t.product_title),(0,u.hasMeaningfulDimensions)(r)&&a.default.createElement("li",null,f),d?a.default.createElement("li",null,d):"",!(0,u.isRedraw)(r)&&a.default.createElement("li",null,l("Qty_number",{number:t.quantity})," ",n&&a.default.createElement(s.default,{className:"edit-quantity",onClick:o},l("edit"))))};t.default=c},1311:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(1312),f=r(c),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.events,r=e.customer,o=e.artwork,a=e.revision,i=e.config;return s.default.createElement("div",{id:"proof-timeline"},s.default.createElement("h3",null,t("Activity")),n.map(function(e,n){return s.default.createElement(f.default,{key:"event_"+n,artwork:o,config:i,customer:r,event:e,index:n,revision:a,t:t})}))}}]),t}(l.Component);t.default=d},1312:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(86),f=r(c),d=n(1313),p=r(d),h=n(1318),m=r(h),v=n(1319),y=r(v),_=n(1320),b=r(_),g=n(1321),E=r(g),O=n(1322),w=r(O),P=n(1323),A=r(P),k=n(1324),T=r(k),C=n(1326),j=r(C),M={artwork_created:p.default,artwork_resumed:y.default,artwork_updated:b.default,artwork_update_requested:m.default,awaiting_new_artwork_resumed:m.default,blank_file:m.default,customer_comment:E.default,damaged_file:m.default,inappropriate_file_type:m.default,cut_off_artwork:m.default,low_resolution_2nd_time:m.default,new_artwork_requested:m.default,redraw_revision_created:T.default,reproof:w.default,revision_approved:A.default,revision_created:T.default,revision_rejected:j.default,redraw_revision_rejected:j.default,sticker_sheet_requirements:m.default,transfer_sticker_requirements:m.default,white_artwork:m.default},N=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.event,n=e.customer,r=e.config,o=t.from_customer?n.display_name:r.store_name;return s.default.createElement("div",{className:"timeline-event"},this.renderAvatar(o),s.default.createElement("div",{className:"timeline-content"},this.renderTitle(o),this.renderEvent()))}},{key:"renderAvatar",value:function(e){var t=this.props,n=t.event,r=t.customer,o=t.config,a=n.from_customer?r.avatar_url:o.images.store_avatar_url;return s.default.createElement("img",{alt:e,className:"avatar-img",height:"30",src:a,width:"30"})}},{key:"renderTitle",value:function(e){var t=this.props,n=t.event,r=t.t,o=new Date(n.created_at),a=f.default.strftime(o,"%b %e"),i=f.default.strftime(o,"%-I:%M %p");return s.default.createElement("p",null,s.default.createElement("strong",null,e),s.default.createElement("span",{className:"timeline-timestamp"},r("date_at_time",{date:a,time:i})))}},{key:"renderEvent",value:function(){var e=this.props,t=e.event,n=e.artwork,r=e.revision,o=e.customer,a=e.t,i=e.config,u=M[t.event];return u&&s.default.createElement(u,{artwork:n,config:i,customer:o,event:t,revision:r,t:a})}}]),t}(l.PureComponent);t.default=N},1313:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(1314),f=r(c),d=n(1315),p=r(d),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.event,n=e.artwork,r=e.t;return s.default.createElement("div",null,s.default.createElement("p",{className:"subject"},r(n.instructions?"uploaded_artwork_with_instructions":"uploaded_artwork"),":"),s.default.createElement(f.default,{fileName:t.info.file_name}),s.default.createElement(p.default,{text:n.instructions}))}}]),t}(l.PureComponent);t.default=h},1314:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=r(o),i=n(266),u=r(i),l=function(e){var t=e.fileName,n=e.url;if(!t)return null;var r=t.replace(/^[0-9-]*/,"");return a.default.createElement("p",null,n?a.default.createElement(u.default,{download:!0,href:n,rel:"nofollow noopener"},r):a.default.createElement("strong",null,r))};t.default=l},1315:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=r(o),i=n(1316),u=r(i),l=n(1317),s=function(e){var t=e.text;return t&&""!==t?a.default.createElement("p",{className:"comment"},a.default.createElement(u.default,{text:(0,l.formatComment)(t)})):null};t.default=s},1316:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=r(o);t.default=function(e){var t=e.text;return a.default.createElement("span",{dangerouslySetInnerHTML:{__html:t}})}},1317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatComment=void 0;var r=n(76),o=(t.formatComment=function(e){return o(a((0,r.escape)(e)))},function(e){return e.replace(/\b(https?:\/\/|www)[-a-zA-Z0-9@:%_+.~#?&\/\/=]+/g,'<a href="$&" target="_blank" rel="noopener">$&</a>')}),a=function(e){return e.replace(/\n/gim,"<br/>")}},1318:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.event,n=e.t,r=t.event;if("new_artwork_requested"===r){var o=t.info&&t.info.reason||"low_res";["missing","low_res"].indexOf(o)!==-1&&(o="low_res"),r+="_"+o}return s.default.createElement("div",null,s.default.createElement("p",{className:"subject"},n("artwork_problems."+r)))}}]),t}(l.PureComponent);t.default=c},1319:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props.t;return s.default.createElement("div",null,s.default.createElement("p",{className:"subject"},e("artwork_resumed")))}}]),t}(l.PureComponent);t.default=c},1320:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");
}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props.t;return s.default.createElement("div",null,s.default.createElement("p",{className:"subject"},e("changed_artwork_file")))}}]),t}(l.PureComponent);t.default=c},1321:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(1315),f=r(c),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.event,n=e.t;return s.default.createElement("div",null,s.default.createElement("p",{className:"subject"},n("commented"),":"),s.default.createElement(f.default,{text:t.comment_text}))}}]),t}(l.PureComponent);t.default=d},1322:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props.t;return s.default.createElement("div",null,s.default.createElement("p",{className:"subject"},e("artwork_reproofed")))}}]),t}(l.PureComponent);t.default=c},1323:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(7),f=n(266),d=r(f),p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.event,n=e.config,r=e.artwork,o=e.t,a=r.revisions,i=t.revision_id,u=a[i],l=function(){return s.default.createElement(d.default,{href:n.artwork_url+"&revision_id="+i},o("proof_link",{number:u.number}))},f=document.getElementById("proof-approved-link-"+i);null!=f&&(0,c.render)(s.default.createElement(l,null),f)}},{key:"render",value:function(){var e=this.props,t=e.event,n=e.t;return s.default.createElement("div",null,s.default.createElement("p",{className:"subject",dangerouslySetInnerHTML:{__html:n("approved_proof_number",{proof_link:'<span id="proof-approved-link-'+t.revision_id+'"></span>'})}}))}}]),t}(l.PureComponent);t.default=p},1324:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=o(s),f=n(1325),d=r(f),p=n(7),h=n(1286),m=n(1315),v=o(m),y=n(266),_=o(y),b=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.event,r=t.artwork,o=t.t,a=r.revisions,i=n.revision_id,u=function(){return c.default.createElement(_.default,{href:e.renderRevisionLink(i,a)},o("proof_link",{number:a[i].number}))},l=document.getElementById("proof-created-link-"+i);null!=l&&(0,p.render)(c.default.createElement(u,null),l)}},{key:"render",value:function(){var e=this.props,t=e.event,n=e.artwork,r=e.config,o=e.t,a=t.info,i=n.revisions,u=t.revision_id,l=i[u];return c.default.createElement("div",null,c.default.createElement("p",{className:"subject",dangerouslySetInnerHTML:{__html:o("created_proof_number",{proof_link:'<span id="proof-created-link-'+t.revision_id+'"></span>:'})}}),c.default.createElement("p",{className:"thumbnail"},c.default.createElement("img",{alt:l.title,src:l.proof_small_url,width:"50"})),c.default.createElement("p",{className:"style-change-details"},this.productChanged(a)?c.default.createElement("span",null,o("product"),":"," ",d.findById(r.products,+a.product_id).name):null,this.dimensionsChanged(a)?c.default.createElement("span",null,o("size"),": ",t.dimensions):null,this.hasColorProductionMetadata(a,r)?c.default.createElement("span",null,o("color"),":"," ",a.production_metadata?a.production_metadata.color:null):null,this.renderOrientationProductionMetadata(a,l,o)),c.default.createElement(v.default,{text:t.comment_text}))}},{key:"renderRevisionLink",value:function(e,t){var n=this.props.config,r=(0,h.latestRevision)(t);return r&&e!==r.id?n.artwork_url+"&revision_id="+e:""+n.artwork_url}},{key:"dimensionsChanged",value:function(e){return e.width||e.height}},{key:"productChanged",value:function(e){return e.product_id}},{key:"hasColorProductionMetadata",value:function(e,t){var n=e.product_id&&d.findById(t.products,e.product_id);if(n){var r=n.production_metadata;if(r){var o=function(e){if(e&&e.colors)return e.colors};return r.some(o)}}}},{key:"renderOrientationProductionMetadata",value:function(e,t,n){var r=e.production_metadata&&e.production_metadata.rotation,o=t.product.configurationOptions&&t.product.configurationOptions.orientation;if(void 0!==r&&o){var a=o.orientations.find(function(e){var t=e.rotation;return r===t});if(a){var i=o.orientations.indexOf(a)+1;return c.default.createElement("span",null,n("Label_orientation"),":"," ","#"+i+" "+n("label_orientations."+a.name))}}}}]),t}(s.PureComponent);t.default=b},1325:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.findById=function(e,t){return e.filter(function(e){return e.id===t})[0]}},1326:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=o(s),f=n(7),d=n(1314),p=r(d),h=n(1315),m=r(h),v=n(266),y=r(v),_=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),l(t,[{key:"getRevision",value:function(){var e=this.props,t=e.event,n=e.artwork,r=n.revisions,o=t.revision_id;return r[o]}},{key:"componentDidMount",value:function(){var e=this.props,t=e.config,n=e.t,r=this.getRevision(),o=function(){return c.createElement(y.default,{href:t.artwork_url+"&revision_id="+r.id},n("proof_link",{number:r.number}))},a=document.getElementById("proof-rejected-link-"+r.id);null!=a&&(0,f.render)(c.createElement(o,null),a)}},{key:"renderAnnotations",value:function(e){return e.map(function(e){return c.createElement("div",{key:""+e.id,className:"annotation-point-small",style:{top:e.y+"%",left:e.x+"%"}},e.id)})}},{key:"renderTitle",value:function(){var e=this.props,t=e.event,n=e.t,r=!!t.comment_text,o=function(e){return c.createElement("p",{className:"subject",dangerouslySetInnerHTML:{__html:""+n(e,{proof_link:'<span id="proof-rejected-link-'+t.revision_id+'"></span>'})}})};return r?c.createElement("div",null,o("rejected_proof_number_with_comment"),c.createElement(m.default,{text:t.comment_text})):o("rejected_proof_number")}},{key:"renderAnnotationFeedback",value:function(){var e=this.props.t,t=this.getRevision();return t.annotations&&0!==t.annotations.length?c.createElement("div",null,c.createElement("p",{className:"subject"},e("added_feedback"),":"),c.createElement("div",{style:{position:"relative",maxWidth:"100px"}},c.createElement("div",{className:"annotation-overlay",style:{width:"100%",height:"100%"}},c.createElement("div",{className:"annotation-points-container"},this.renderAnnotations(t.annotations))),c.createElement("img",{alt:t.title,className:"annotation-image",src:t.proof_small_url,width:"100"})),c.createElement("div",null,c.createElement("ol",{className:"annotation-items"},t.annotations.map(function(e){return c.createElement("li",{key:e.id,value:e.id},c.createElement("span",null,e.text))})))):null}},{key:"render",value:function(){var e=this.props.event;return c.createElement("div",null,this.renderTitle(),this.renderAnnotationFeedback(),e.info.artwork_filename?c.createElement(p.default,{fileName:e.info.artwork_filename,url:e.info.artwork_url}):null)}}]),t}(c.PureComponent);t.default=_},1327:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=o(s),f=n(1286),d=r(f),p=n(1059),h=o(p),m=n(1282),v=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n}return u(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.config,n=e.artwork,r=e.order,o=e.t,a=d.latestRevision(n.revisions);return c.default.createElement("div",null,a&&d.isAwaitingApproval(a)?c.default.createElement("div",null,c.default.createElement("h1",null,o("proof_ready_in",{time:n.time_to_proof})),c.default.createElement("p",{className:"subtitle"},o("proof_ready_in_text")," ",o(r.sendProofNotifications?"proof_ready_sms_alert_set":"proof_ready_sms_alert_not_set")),c.default.createElement(h.default,{isSubscribed:r.sendProofNotifications,onChange:this.onChange,orderToken:r.token,phone:r.phone,t:o,userId:r.user_id})):c.default.createElement("div",null,c.default.createElement("h1",null,o("thanks_for_the_feedback")),c.default.createElement("p",{className:"subtitle"},o("requested_changes_text",{hours:t.proofing_time}))))}},{key:"onChange",value:function(e){this.props.dispatch((0,m.updatePhoneAlert)(e))}}]),t}(s.PureComponent);t.default=v},1328:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(1286),f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.revision,r=e.artwork;if(!(0,c.hasMeaningfulDimensions)(n))return null;var o=n.height!==r.lineItem.height||n.width!==r.lineItem.width;return s.default.createElement("div",{id:"size-info"},o?t("adjusted_size",{size:n.dimensions}):t("the_size_is",{size:n.dimensions}))}}]),t}(l.PureComponent);t.default=f},1329:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.config;return s.default.createElement("div",null,s.default.createElement("h1",null,t("your_proof_is_on_hold")),s.default.createElement("p",{className:"subtitle",dangerouslySetInnerHTML:{__html:t("your_proof_is_on_hold_details",{contact_link:n.contact_us_link})}}))}}]),t}(l.PureComponent);t.default=c},1330:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props.t;return s.default.createElement("div",null,s.default.createElement("h1",null,e("item_canceled")))}}]),t}(l.PureComponent);t.default=c},1331:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.config;return s.default.createElement("div",null,s.default.createElement("h1",null,t("proof_pending"),"."),s.default.createElement("p",{className:"subtitle",dangerouslySetInnerHTML:{__html:t("not_ready",{contact_link:n.contact_us_link})}}))}}]),t}(l.PureComponent);t.default=c},1332:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(266),f=r(c),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.revision,r=e.config;return s.default.createElement("div",null,s.default.createElement("h1",null,t("proof_number",{number:n.number})),s.default.createElement("p",{className:"subtitle"},t("outdated_proof")," ",s.default.createElement(f.default,{href:r.artwork_url},t("view_latest"))))}}]),t}(l.PureComponent);t.default=d},1333:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(1286),f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.config,r=e.revision;return s.default.createElement("div",{className:"header-approved"},s.default.createElement("img",{alt:t("approved"),src:n.images.approved}),(0,c.hasMeaningfulDimensions)(r)&&s.default.createElement("div",{id:"size-info"},t("final_size",{size:r.dimensions})))}}]),t}(l.Component);t.default=f},1334:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(1286),f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.config,r=e.revision;return s.default.createElement("div",{className:"header-approved"},s.default.createElement("img",{src:n.images.recently_approved,srcSet:n.images.recently_approved_retina}),(0,c.hasMeaningfulDimensions)(r)&&s.default.createElement("div",{id:"size-info"},t("final_size",{size:r.dimensions})))}}]),t}(l.Component);t.default=f},1335:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(669),f=r(c),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"componentDidMount",value:function(){var e=f.default.find("body");this.props.isClear&&f.default.addClass(e,"proofing-transparent")}},{key:"componentWillUnmount",value:function(){var e=f.default.find("body");f.default.removeClass(e,"proofing-transparent"),f.default.removeClass(e,"proofing-dark")}},{key:"render",value:function(){var e=this.props.t,t=f.default.find("body");return s.default.createElement("div",{id:"toggle-background"},s.default.createElement("span",{className:"title only-sm-up"},e("background")),s.default.createElement("div",{className:"toggle-simple"},s.default.createElement("span",null,e("light")),s.default.createElement("input",{id:"toggle-bg",onChange:this.toggleBackground(t),type:"checkbox"}),s.default.createElement("label",{htmlFor:"toggle-bg"},s.default.createElement("div",{className:"toggle-switch"})),s.default.createElement("span",null,e("dark"))))}},{key:"toggleBackground",value:function(e){return function(){e.classList.toggle("proofing-dark")}}}]),t}(l.PureComponent);t.default=d},1336:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=r(o),i=n(16),u=n(1337),l=r(u),s=n(1338),c=r(s),f=n(266),d=r(f),p=function(e){var t=e.activeArtwork,n=e.artworksReadyToProof,r=e.locale,o=e.metric,i=e.showProofNotification,u=e.t,s=n.find(function(e){return e.id!==t.id});if(!s||!i)return null;var f=(0,l.default)(s,{locale:r,metric:o}),p=f.approval_url,h=f.dimensions,m=f.product_name,v=f.proof;return a.default.createElement(d.default,{className:"proof-popup",href:p},a.default.createElement(c.default,{proof:v,size:"small"}),a.default.createElement("div",{className:"summary"},a.default.createElement("span",{className:"title"},u("review_your_next_proof")),a.default.createElement("p",null,m),a.default.createElement("p",null,u("size"),": ",h)))},h=function(e){var t=e.userStatus;return{locale:t.sitePreferences.locale,metric:"metric"===t.sitePreferences.measurement_system,artworksReadyToProof:t.artworksReadyToProof}};t.default=(0,i.connect)(h)(p)},1337:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(870),a=r(o);t.default=function(e,t){var n=e.id,r=e.token,o=e.width,i=e.height,u=e.product_name,l=e.product_permalink,s=e.proof,c=t.locale,f=t.metric;return{id:n,product_name:u,product_permalink:l,proof:s,dimensions:(0,a.default)({width:o,height:i,locale:c,metric:f}),approval_url:"/artworks/"+n+"?token="+r}}},1338:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=r(o),i=function(e){var t=e.proof,n=e.size;return a.default.createElement("div",{className:"image-wrapper"},a.default.createElement("img",{src:u(t,n)}))},u=function(e,t){return e&&e[t]?e[t]:"/assets/images/white-6e9ed7416220190122.png"};t.default=i},1339:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=o(s),f=n(250),d=n(121),p=r(d),h=n(1308),m=r(h),v=n(1286),y=r(v),_=n(919),b=o(_),g=n(902),E=o(g),O=n(109),w=n(1282),P=o(w),A=n(105),k=o(A),T=n(266),C=o(T),j=n(689),M=o(j),N=n(239),S=o(N),I=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.submitPayment=n.submitPayment.bind(n),n}return u(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.order,n=e.payment;return c.default.createElement(f.CSSTransitionGroup,{transitionAppear:!0,transitionAppearTimeout:0,transitionEnterTimeout:0,transitionLeaveTimeout:0,transitionName:"fade-delay"},c.default.createElement("div",{id:"payment"},this.renderCurrentState(t,n)))}},{key:"renderCurrentState",value:function(e,t){switch(e.paymentState){case p.PAYMENT_STATE.processing:return this.renderProcessing();case p.PAYMENT_STATE.complete:return this.renderProcessing(!0);case p.PAYMENT_STATE.failed:return this.renderFailure(e,t);default:return this.renderProcessing()}}},{key:"renderProcessing",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props.t;return c.default.createElement("div",{id:"processing-payment"},c.default.createElement("div",{className:"loading-dots"},c.default.createElement("span",null),c.default.createElement("span",null),c.default.createElement("span",null)),c.default.createElement("h1",null,t("processing_payment")),c.default.createElement("p",null,t(e?"please_wait_payment_finishing":"please_wait_payment")));
}},{key:"renderFailure",value:function(e,t){var n=this.props,r=n.t,o=n.artwork,a=n.locale,i=n.config,u=y.latestRevision(o.revisions),l=e.cart,s=m.updatedCart(l,o,u),f=s.currency,d=m.calculateTotal(s);return c.default.createElement("div",{id:"payment-failed"},c.default.createElement("div",{className:"center-text"},c.default.createElement("h1",null,r("payment_failed")),e.paymentNotice&&c.default.createElement("p",{className:"notification-inline errors"},e.paymentNotice),c.default.createElement("p",{className:"subtitle"},r("order"),":"," ",c.default.createElement(C.default,{href:i.orderUrl},e.orderNumber),c.default.createElement("br",null),r("order_total"),":"," ",c.default.createElement(M.default,{currency:f,id:"order-total",locale:a,value:d}))),c.default.createElement(S.default,{ref:"form",className:"alt-form",id:"payment-form",onValidSubmit:this.submitPayment},c.default.createElement(b.default,{ref:"payment_form",address:e.shipAddress,addressDisplayOption:this.props.addressDisplayOption,admin:this.props.admin,becameUser:this.props.becameUser,billingAddresses:this.props.billingAddresses,canSaveAddress:!this.props.guest,canSavePaymentMethod:this.props.canSavePaymentMethod,currency:e.currency,defaultCreditCards:t.defaultCreditCards,dispatch:this.props.dispatch,email:this.props.email,existingCreditCards:t.existingCreditCards,fiscalCode:e.billing_address.fiscal_code,guest:this.props.guest,invoice:null,needsProofing:e.needsProofing,order:e,requiresFiscalCode:p.requiresFiscalCode(e,e.shipAddress),showAddressPicker:this.props.showAddressPicker,showHeader:!1,t:r.checkout,updateOrderAction:E.default.order.update}),this.renderSubmitButton(e,r)))}},{key:"isProcessing",value:function(e){return e.paymentState===p.PAYMENT_STATE.processing}},{key:"renderSubmitButton",value:function(e,t){return e.paymentMethod===O.paymentMethods.PAYPAL?c.default.createElement("button",{ref:"submitPaymentButton",className:"paypal-button button large secondary block"+(this.isProcessing(e)?" loading":""),disabled:this.isProcessing(e),id:"submit-checkout",style:{display:"inline-block"}},t("pay_with"),"  ",c.default.createElement("i",{className:"payment-icon payment-icon-paypal-big"})):c.default.createElement("button",{ref:"submitPaymentButton",className:"stripe-button button large secondary block"+(this.isProcessing(e)?" loading":""),disabled:this.isProcessing(e),id:"submit-checkout"},t("submit_payment"))}},{key:"submitPayment",value:function(e){this.props.order.paymentMethod!==O.paymentMethods.NEW_CARD&&this.props.dispatch(k.default.payment.processPayment()),this.props.dispatch(k.default.payment.authorize(P.default.chargeOrder(this.props.stripe),this.props.stripe))}}]),t}(s.PureComponent);t.default=I},1340:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(38),i=n(66),u=o(i),l=n(67),s=n(1090),c=n(1341),f=r(c),d=(0,a.combineReducers)(f),p=(0,l.compose)({name:"Proofing"});t.default=function(e){return(0,a.createStore)(d,(0,s.stateInit)(e),p((0,a.applyMiddleware)(u.default)))}},1341:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showProofNotification=t.order=t.artwork=t.fiscalCode=t.becameUser=t.billingAddresses=t.email=t.payment=t.lineItem=t.config=t.customer=t.translations=t.canSavePaymentMethod=t.guest=t.scope=t.currency=t.rates=t.locale=t.admin=t.activeRevisionId=t.orderNumber=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(952);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=n(963),u=r(i),l=n(962),s=r(l),c=n(959),f=r(c),d=n(1342),p=r(d),h=n(1343),m=r(h),v=n(965),y=r(v),_=n(1344),b=r(_),g=n(966),E=r(g),O=n(1282),w=n(72),P=r(w);t.orderNumber=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e},t.activeRevisionId=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e},t.admin=function e(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},t.locale=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return e},t.rates=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},t.currency=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USD";return e},t.scope=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"proofing";return e},t.guest=function e(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},t.canSavePaymentMethod=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e},t.translations=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},t.customer=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e},t.config=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e},t.lineItem=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e},t.payment=function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e},t.email=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e},t.billingAddresses=P.default,t.becameUser=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e},t.fiscalCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e},t.artwork=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"NOOP"};if("undefined"==typeof t)return null;var e=t;return e=(0,p.default)(e,n)},t.order=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"NOOP"};if("undefined"==typeof t)return null;var e=t;if(n.type===O.CANCEL_ITEM){var r=e.cart.cartItems.filter(function(e){return e.id!==n.lineItemId});e=o({},e,{cart:o({},e.cart,{cartItems:r})})}e=(0,y.default)(e,n),e=(0,b.default)(e,n),e=(0,E.default)(e,n),e=(0,m.default)(e,n);var a=(0,u.default)((0,s.default)(e.billing_address,n),n),i=(0,f.default)(e.credit_card,n);return o({},e,{billing_address:a,credit_card:i})},t.showProofNotification=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"NOOP"};return t.type===O.SHOW_NEXT_PROOF_NOTIFICATION||e}},1342:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(1282),l=n(666),s=o(l),c=n(1289),f=r(c),d=n(1286),p=r(d),h=function(e,t){return _(e,f.STATE.approved,p.STATE.approved)},m=function(e,t){return _(e,f.STATE.recently_approved,p.STATE.recently_approved)},v=function(e,t){var n=i({},e,{events:e.events.concat(b(e))});return _(n,f.STATE.ready_to_proof,p.STATE.rejected)},y=function(e,t){return _(e,f.STATE.canceled,p.STATE.canceled)},_=function(e,t,n){var r=e.revisions,o=i({},e,{proof_state:t,revisions:r}),u=p.latestRevision(r);return null==u?o:i({},o,{revisions:i({},r,a({},u.id,u))})},b=function(e){var t=e.uploadedFiles[0],n=t.artworkInstructions,r=p.latestRevision(e.revisions),o="revision_rejected",a=0;return r&&p.isRedraw(r)?(o="redraw_revision_rejected",a=r.id):r&&(a=r.id),{revision_id:a,event:o,from_customer:!0,created_at:new Date,comment_text:n,dimensions:"",info:{}}},g=function(e,t){return i({},e,{lineItem:i({},e.lineItem,{productionMetadata:i({},e.lineItem.productionMetadata,{rotation:t.data.rotation})})})},E=function(e,t){var n=i({},e.lineItem,t.data);return i({},e,{quantity:t.data.quantity,lineItem:n,revisions:t.data.revisions})},O=function(e,t){var n=p.latestRevision(e.revisions);return n&&n.annotations.push(t.annotation),i({},e,{revisions:i({},e.revisions)})},w=function(e,t){var n=p.latestRevision(e.revisions);if(n){var r=n.annotations.find(function(e){return e.id===t.annotation.id});n.annotations=n.annotations.filter(function(e){return e.id!==t.annotation.id}),n.annotations.push(i({},r,t.annotation))}return i({},e,{revisions:i({},e.revisions)})},P=function(e,t){var n=p.latestRevision(e.revisions);return n&&(n.annotations=n.annotations.filter(function(e){return e.id!==t.annotationId})),i({},e,{revisions:i({},e.revisions)})};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"NOOP"};if("undefined"==typeof e)return null;var n=e,r=function(e,t){return e};switch(t.type){case u.APPROVE_MOCKUP:r=h;break;case u.RECENTLY_APPROVED:r=m;break;case u.REQUEST_CHANGES:r=v;break;case u.CANCEL_ITEM:r=y;break;case u.UPDATE_ORIENTATION:r=g;break;case u.UPDATE_QUANTITY:r=E;break;case u.ADD_ANNOTATION:r=O;break;case u.UPDATE_ANNOTATION:r=w;break;case u.REMOVE_ANNOTATION:r=P;break;default:r=s.default}return r(n,t)}},1343:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1282),o=n(78),a=function(e,t){var n=t.address,r=n.phone,a=n.isSubscribed;return(0,o.assign)(e,{phone:r,sendProofNotifications:a})};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"NOOP"},n=e;return t.type===r.UPDATE_PHONE_ALERT?a(n,t):n}},1344:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1282),a=n(908),i=n(910),u=n(104),l=n(967),s=function(e,t){return r({},e,t.order)},c=function(e,t){return r({},e,t.attrs)},f=function(e,t){var n=t.fiscalCode;return r({},e,{fiscalCode:n})},d=function(e,t){var n=t.attrs;return r({},e,{billing_address_id:n.addressId,billing_address:n.address})};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"NOOP"},n=e,r=function(e,t){return e};switch(t.type){case a.UPDATE_ORDER:r=c;break;case o.UPDATE_ORDER_DETAILS:r=s;break;case a.SET_ADDRESS:r=d;break;case i.SET_FISCAL_CODE:r=f;break;case u.UPDATE_BUSINESS_ENTITY:r=l.setBusinessEntity}return r(n,t)}}});